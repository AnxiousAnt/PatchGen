#N canvas 181 108 1099 800 10;
#X msg 771 652 stop;
#X obj 35 28 inlet;
#X text 968 517 stop;
#X obj 612 244 d-gate2;
#X text 667 243 timetag found?;
#X text 577 259 no;
#X text 645 261 yes;
#X obj 770 259 >;
#X text 797 258 cur>x?;
#X obj 612 183 t a a;
#X text 627 294 cur>x?;
#X text 781 292 cur>x?;
#X text 450 373 no - 2;
#X text 602 322 yes - 1;
#X text 704 316 no - 4;
#X text 848 321 yes - 3;
#X text 624 132 current array pos;
#X obj 574 294 d-gate2;
#X obj 724 294 d-gate2;
#X obj 428 578 f;
#X obj 446 551 f;
#X obj 872 340 - 1;
#X obj 836 364 f;
#X msg 836 340 bang;
#X text 431 592 swap store and cur;
#X obj 555 543 f;
#X obj 537 577 f;
#X obj 763 181 sel 0;
#X msg 686 220 1;
#X msg 658 220 0;
#X text 597 336 (do nothing);
#X obj 446 323 t b b;
#X msg 516 395 0;
#X obj 884 518 f;
#X obj 836 447 moses;
#X msg 884 498 bang;
#X obj 836 684 f;
#X obj 867 683 f;
#X msg 836 592 bang;
#X obj 35 448 outlet;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 836 716 pd tw;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 868 541 pd tw;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 428 628 pd tw;
#N canvas 0 22 450 300 tr 0;
#X obj 29 176 outlet;
#X obj 95 176 outlet;
#X obj 29 11 inlet;
#X obj 29 39 t a a;
#X obj 29 79 tabread \$0-values;
#X obj 95 112 tabread \$0-timetags;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X restore 541 483 pd tr;
#N canvas 0 22 450 300 tr 0;
#X obj 29 176 outlet;
#X obj 95 176 outlet;
#X obj 29 11 inlet;
#X obj 29 39 t a a;
#X obj 29 79 tabread \$0-values;
#X obj 96 112 tabread \$0-timetags;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X restore 836 391 pd tr;
#X obj 612 154 tabread \$0-values;
#X obj 763 148 tabread \$0-timetags;
#X obj 446 83 sel 0;
#X obj 35 283 t b b;
#X msg 51 73 size \$1;
#X text 963 446 else;
#X text 789 162 timetag found?;
#X text 482 505 .. other part of 'store';
#X text 487 427 part of 'store'..;
#X text 501 81 if we reach the start - bail out;
#X text 409 348 force write at pos 0;
#X text 747 446 is cur-1>x ?;
#X text 890 465 yes;
#X text 816 465 no;
#X obj 51 52 d-default \$1 32;
#N canvas 0 0 732 342 tables 0;
#X text 87 34 implements a running median in two arrays:;
#X text 82 114 on insert \, we find the value with the current timetag
;
#X text 82 124 and remove it \, and insert the new value with the current
;
#X text 82 136 timetag \, maintaining order in the values table.;
#X text 82 168 the array \, stepping backwards.;
#X text 82 158 this implemention does both steps in a single pass through
;
#X text 82 88 one array stores values \, the other stores timetags.
;
#X obj 111 60 table \$0-values 500;
#X obj 259 60 table \$0-timetags 500;
#X restore 215 481 pd tables;
#X obj 885 661 r \$0-tt;
#X obj 567 577 r \$0-tt;
#X obj 807 182 r \$0-tt;
#X obj 771 676 s \$0-for;
#X msg 756 363 stop;
#X obj 756 387 s \$0-for;
#X obj 657 109 s \$0-curr-pos;
#X obj 763 124 r \$0-curr-pos;
#X obj 872 296 r \$0-curr-pos;
#X obj 913 542 r \$0-curr-pos;
#X obj 879 717 r \$0-curr-pos;
#X obj 541 456 r \$0-curr-pos;
#X obj 475 628 r \$0-curr-pos;
#X obj 612 110 t a a;
#X obj 216 119 s \$0-size;
#X obj 126 167 s \$0-clear;
#N canvas 0 0 591 431 clear-and-resize 0;
#X obj 39 214 s \$0-values;
#X obj 93 96 t b a;
#X obj 125 214 s \$0-timetags;
#X msg 39 132 const 0;
#X text 134 94 clear on resize;
#X obj 93 65 r \$0-size;
#X obj 39 33 r \$0-clear;
#X msg 125 166 resize \$1;
#X obj 125 127 max 500;
#X text 191 128 only resize if 500 wasn't enough;
#X obj 125 147 change 500;
#X connect 1 0 3 0;
#X connect 1 1 8 0;
#X connect 3 0 0 0;
#X connect 3 0 2 0;
#X connect 5 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 7 0 0 0;
#X connect 8 0 10 0;
#X connect 10 0 7 0;
#X restore 215 505 pd clear-and-resize;
#X obj 81 224 s \$0-increment-tag;
#X obj 35 190 t b a b;
#X obj 58 251 s \$0-new-x;
#X obj 658 185 r \$0-new-x;
#X obj 171 146 s \$0-get;
#N canvas 0 0 398 295 increment-tag 0;
#X obj 52 151 f;
#X text 78 152 timetag;
#X obj 52 129 f 0;
#X obj 83 129 + 1;
#X obj 113 129 % 32;
#X obj 52 181 s \$0-tt;
#X obj 52 63 r \$0-increment-tag;
#X obj 52 85 b;
#X obj 138 102 r \$0-size;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 8 0 4 1;
#X restore 215 528 pd increment-tag;
#X obj 35 96 route insert float clear get size;
#X obj 788 237 r \$0-new-x;
#X obj 458 577 r \$0-new-x;
#X obj 854 635 r \$0-new-x;
#X obj 868 425 r \$0-new-x;
#X obj 67 309 s \$0-for;
#X text 133 309 start loop;
#N canvas 154 70 500 426 loopdown 0;
#X text 219 331 step backwards;
#X obj 130 64 r \$0-for;
#X obj 130 357 outlet;
#X obj 130 269 until;
#X obj 130 245 max 0;
#X obj 130 212 f 32;
#X obj 167 331 - 1;
#X obj 130 330 f 31;
#X obj 300 177 - 1;
#X obj 300 154 r \$0-size;
#X obj 275 207 f 31;
#X obj 130 126 t b b;
#X obj 130 93 route bang stop;
#X obj 181 245 bang;
#X connect 1 0 12 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 7 1;
#X connect 7 0 6 0;
#X connect 7 0 2 0;
#X connect 8 0 10 1;
#X connect 9 0 8 0;
#X connect 9 0 5 1;
#X connect 10 0 7 1;
#X connect 11 0 5 0;
#X connect 11 1 10 0;
#X connect 12 0 11 0;
#X connect 12 1 13 0;
#X connect 13 0 3 1;
#X restore 446 37 pd loopdown;
#X obj 446 399 t b b b;
#X obj 724 338 t b b;
#N canvas 0 0 533 574 doc 0;
#X text 158 138 do nothing;
#X text 173 233 move cur-1 to cur;
#X text 144 314 stop;
#X text 154 173 swap store and cur;
#X text 145 220 if cur-1>x;
#X text 123 101 (init) put x \, tt -> store;
#X text 140 246 else;
#X text 170 255 put x \, tt at cur;
#X text 170 267 stop;
#X text 144 301 put store at cur (same as 2.);
#X text 48 76 (x is value \, tt is timetag);
#X text 262 385 part of dlib;
#X text 51 451 released under the GNU General Public License v3+;
#X text 169 412 copyright damian stewart 2008;
#X text 140 426 damian@frey.co.nz | www.frey.co.nz;
#X text 45 64 when inserting x \, tt there are 4 possibilities:;
#X text 121 126 1 timetag not yet found \, cur>x;
#X text 121 159 2 timetag not yet found \, cur<x;
#X text 120 205 3 timetag found \, cur>x;
#X text 120 289 4 timetag found \, cur<x;
#X restore 271 364 pd doc;
#X text 244 585 part of dlib;
#X text 33 651 released under the GNU General Public License v3+;
#X text 151 612 copyright damian stewart 2008;
#X text 122 626 damian@frey.co.nz | www.frey.co.nz;
#N canvas 0 0 771 608 get-median-val 0;
#X obj 102 377 tabread \$0-values;
#X obj 102 491 outlet;
#X obj 102 67 inlet;
#X obj 102 99 b;
#X obj 155 68 inlet;
#X text 154 48 size of value array;
#X obj 102 335 f;
#X obj 301 152 int;
#X obj 301 128 / 2;
#X obj 306 367 tabread \$0-values;
#X obj 306 325 f;
#X obj 442 367 tabread \$0-values;
#X obj 442 331 f;
#X obj 460 310 + 1;
#X obj 301 174 t a a a;
#X obj 155 141 mod 2;
#X obj 306 248 t b b;
#X obj 306 411 +;
#X obj 306 435 / 2;
#X obj 155 163 == 0;
#N canvas 275 152 450 300 demux 0;
#X obj 75 71 inlet;
#X obj 128 71 inlet;
#X obj 75 160 spigot 1;
#X obj 148 161 spigot 0;
#X obj 128 124 == 0;
#X obj 75 191 outlet;
#X obj 148 191 outlet;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 1 0 3 1;
#X connect 2 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 2 1;
#X restore 102 187 pd demux;
#X obj 155 98 t a a;
#X text 348 434 linear interpolation;
#X text 105 229 even right \, odd left;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 20 0;
#X connect 4 0 21 0;
#X connect 6 0 0 0;
#X connect 7 0 14 0;
#X connect 8 0 7 0;
#X connect 9 0 17 0;
#X connect 10 0 9 0;
#X connect 11 0 17 1;
#X connect 12 0 11 0;
#X connect 13 0 12 1;
#X connect 14 0 6 1;
#X connect 14 1 10 1;
#X connect 14 2 13 0;
#X connect 15 0 19 0;
#X connect 16 0 10 0;
#X connect 16 1 12 0;
#X connect 17 0 18 0;
#X connect 18 0 1 0;
#X connect 19 0 20 1;
#X connect 20 0 6 0;
#X connect 20 1 16 0;
#X connect 21 0 15 0;
#X connect 21 1 8 0;
#X restore 35 406 pd get-median-val;
#X obj 45 379 r \$0-get;
#X obj 151 375 r \$0-size;
#X connect 0 0 64 0;
#X connect 1 0 84 0;
#X connect 3 0 17 0;
#X connect 3 1 18 0;
#X connect 7 0 17 1;
#X connect 7 0 18 1;
#X connect 9 0 3 0;
#X connect 9 1 7 0;
#X connect 17 0 92 0;
#X connect 18 0 93 0;
#X connect 18 1 23 0;
#X connect 19 0 42 0;
#X connect 20 0 19 1;
#X connect 21 0 22 1;
#X connect 22 0 44 0;
#X connect 23 0 22 0;
#X connect 25 0 26 1;
#X connect 26 0 42 1;
#X connect 27 0 28 0;
#X connect 28 0 3 1;
#X connect 29 0 3 1;
#X connect 31 0 92 0;
#X connect 31 1 32 0;
#X connect 32 0 42 2;
#X connect 33 0 41 1;
#X connect 34 0 38 0;
#X connect 34 1 35 0;
#X connect 34 1 41 0;
#X connect 35 0 33 0;
#X connect 36 0 40 0;
#X connect 37 0 40 1;
#X connect 38 0 36 0;
#X connect 38 0 37 0;
#X connect 38 0 0 0;
#X connect 43 0 20 1;
#X connect 43 1 25 1;
#X connect 44 0 34 0;
#X connect 44 1 33 1;
#X connect 45 0 9 0;
#X connect 46 0 27 0;
#X connect 47 0 31 0;
#X connect 47 1 74 0;
#X connect 48 0 99 0;
#X connect 48 1 89 0;
#X connect 49 0 84 0;
#X connect 59 0 49 0;
#X connect 61 0 37 1;
#X connect 62 0 26 1;
#X connect 63 0 27 1;
#X connect 65 0 66 0;
#X connect 68 0 46 0;
#X connect 69 0 21 0;
#X connect 70 0 41 2;
#X connect 71 0 40 2;
#X connect 72 0 43 0;
#X connect 73 0 42 2;
#X connect 74 0 45 0;
#X connect 74 1 67 0;
#X connect 79 0 48 0;
#X connect 79 1 80 0;
#X connect 79 2 78 0;
#X connect 81 0 29 0;
#X connect 84 0 79 0;
#X connect 84 1 79 0;
#X connect 84 2 76 0;
#X connect 84 3 82 0;
#X connect 84 4 75 0;
#X connect 85 0 7 1;
#X connect 86 0 19 1;
#X connect 87 0 36 1;
#X connect 88 0 34 1;
#X connect 91 0 47 0;
#X connect 92 0 20 0;
#X connect 92 0 25 0;
#X connect 92 1 19 0;
#X connect 92 2 26 0;
#X connect 93 0 92 0;
#X connect 93 1 65 0;
#X connect 99 0 39 0;
#X connect 100 0 99 0;
#X connect 101 0 99 1;
