#N canvas 1 22 1020 532 10;
#X obj 142 145 change~;
#X obj 142 103 clip~ -1 1;
#X obj 145 230 rpole~;
#X obj 142 82 *~ 1e+07;
#X obj 142 166 fexpr~ $x1==1;
#X obj 142 124 fexpr~ $x1>=0;
#X obj 149 482 dac~;
#X obj 142 62 osc~ 220;
#X floatatom 142 42 5 0 0 0 - - -;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-array 1000 float 0;
#X coords 0 250 999 -1 320 450 1 0 0;
#X restore 650 19 graph;
#X obj 15 357 tabwrite~ \$0-array;
#X obj 207 257 samphold~;
#X floatatom 325 362 15 0 0 0 - - -;
#X obj 143 187 *~ -1;
#X obj 143 208 +~ 1;
#X obj 148 429 /~;
#X obj 97 211 sig~ 1;
#X obj 325 322 fexpr~ 22050/$x1;
#X obj 15 328 metro 100;
#X obj 148 449 -~ 1;
#X obj 15 303 loadbang;
#X floatatom 195 317 5 0 0 0 - - -;
#X floatatom 54 268 5 0 0 0 - - -;
#X text 192 37 sine input signal;
#X text 202 81 make square by amplifying and clipping;
#X text 201 145 convert to pulse;
#X obj 52 249 Snapshot~ 100;
#X obj 195 294 Snapshot~ 100;
#X obj 325 342 Snapshot~ 100;
#X text 232 163 only let through rising edges of the square;
#X text 221 196 convert to a format that works with rpole~;
#X text 215 232 accumulate until next pulse;
#X text 272 256 sample and hold peak value of the sawtooth to get frequency
information;
#X text 420 340 should display the input frequency;
#X text 202 429 divide rpole output by sampled value to get constant
amplitude;
#X text 46 8 sine to sawtooth with frequency extraction all signal
level;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 2 0 11 0;
#X connect 2 0 15 0;
#X connect 2 0 10 0;
#X connect 2 0 26 0;
#X connect 3 0 1 0;
#X connect 4 0 13 0;
#X connect 5 0 0 0;
#X connect 5 0 11 1;
#X connect 7 0 3 0;
#X connect 8 0 7 0;
#X connect 11 0 15 1;
#X connect 11 0 17 0;
#X connect 11 0 27 0;
#X connect 13 0 14 0;
#X connect 14 0 2 1;
#X connect 15 0 19 0;
#X connect 16 0 2 0;
#X connect 17 0 28 0;
#X connect 18 0 10 0;
#X connect 19 0 6 0;
#X connect 19 0 6 1;
#X connect 20 0 18 0;
#X connect 26 0 22 0;
#X connect 27 0 21 0;
#X connect 28 0 12 0;
