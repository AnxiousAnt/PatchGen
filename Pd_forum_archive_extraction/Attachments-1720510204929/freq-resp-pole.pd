#N canvas 187 22 836 266 12;
#X obj 323 88 nbx 5 14 -1e+37 22050 0 0 empty freq-set empty 0 -8 0
10 -262130 -1 -1 20 256;
#X text 287 85 Freq;
#X obj 502 91 nbx 5 14 1 1e+37 0 0 empty q-set empty 0 -8 0 10 -261682
-1 -1 10 256;
#X text 481 88 Q;
#X obj 326 51 hsl 128 15 20 10000 0 0 empty empty empty -2 -8 0 10
-262130 -1 -1 0 1;
#X msg 323 173 0.000522445 0.999711 0.0028487;
#N canvas 310 43 928 480 Z-Transform 0;
#X obj 120 193 cnv 15 200 50 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 399 140 cpole~;
#X text 450 139 =;
#X obj 473 135 fexpr~ $x1 + ($x3 * $y1) - ($x4 * $y2) \; $x2 + ($x4
* $y1) + ($x3 * $y2);
#X obj 21 108 r get_amp;
#X obj 21 236 s amp;
#X obj 21 183 cartopol;
#X obj 21 210 expr 1 / $f1;
#X text 124 199 transfer function:;
#X text 568 33 y[n] = x[n] + a[n] * y[n-1];
#X text 419 34 action of real pole:;
#X obj 21 136 expr 1 - a_Re * freq_Re \; a_Re * freq_Im;
#X text 146 218 H(z) = 1 / 1 - a * z^-1;
#X text 27 45 Adapt to complex pole \; with coeficients: "a_Re" & "a_Im"
;
#X obj 496 62 rpole~;
#X text 549 61 =;
#X obj 571 61 fexpr~ $x + $x2 * $y;
#X obj 656 361 cpole~;
#X obj 656 334 *~;
#X obj 656 419 dac~;
#X obj 656 393 *~;
#X obj 691 396 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 636 301 noise~;
#X obj 690 297 r \$0-gain;
#X obj 703 332 r \$0-re;
#X obj 724 359 r \$0-im;
#X obj 492 380 rpole~;
#X obj 492 354 *~;
#X obj 492 442 dac~;
#X obj 492 416 *~;
#X obj 527 419 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 492 295 noise~;
#X obj 533 329 r \$0-gain;
#X obj 546 364 r \$0-re;
#X text 475 269 1 pole [lop~];
#X text 632 268 1 complex pole [vcf~];
#X text 419 108 action of complex pole [cpole~]:;
#X text -18 310 Output is frequency response \, which is calculated
for a set of complex frequencies (freq_Re and freq_Im \, which are
\, respectively the cossine and sine of frequency in radians per sample)
;
#X text 396 213 Below you can hear how the generated coeficients sound
like:;
#X connect 4 0 11 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 11 0 6 0;
#X connect 11 1 6 1;
#X connect 17 0 20 0;
#X connect 18 0 17 0;
#X connect 20 0 19 0;
#X connect 20 0 19 1;
#X connect 21 0 20 1;
#X connect 22 0 18 0;
#X connect 23 0 18 1;
#X connect 24 0 17 2;
#X connect 25 0 17 3;
#X connect 26 0 29 0;
#X connect 27 0 26 0;
#X connect 29 0 28 0;
#X connect 29 0 28 1;
#X connect 30 0 29 1;
#X connect 31 0 27 0;
#X connect 32 0 27 1;
#X connect 33 0 26 1;
#X restore 661 160 pd Z-Transform;
#N canvas 107 28 758 654 vcf-coefficients(cpole) 0;
#X obj 271 395 v ampcorrect;
#X obj 309 367 v oneminusr;
#X obj 347 338 v r;
#X obj 234 428 v gain;
#X obj 385 337 v cf;
#X obj 422 318 v qinv;
#X obj 494 321 v Q;
#X obj 73 542 outlet;
#X obj 353 23 inlet;
#X obj 132 23 inlet;
#X obj 132 118 f;
#X obj 54 406 list prepend set;
#X obj 54 434 list trim;
#X obj 54 462 t b a;
#X obj 55 357 pack f f f;
#X obj 255 180 expr ampcorrect * oneminusr \; 2 - 2 / (Q + 2) \; 1
- r \; if (qinv > 0 \, 1 - cf * qinv \, 0) \; max($f1 * 2 * pi_\$0
/ sr_\$0 \, 0) \; 1/Q \; max($f2 \, 1);
#X obj 59 195 expr gain \; r * cos(cf) \; r * sin(cf);
#X obj 145 350 s \$0-gain;
#X obj 175 288 s \$0-im;
#X obj 160 318 s \$0-re;
#X text 282 493 This generates complex coeficients to use with [cpole~].
;
#X obj 353 70 trigger bang float;
#X obj 132 151 trigger bang float;
#X connect 8 0 21 0;
#X connect 9 0 10 0;
#X connect 10 0 22 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 7 0;
#X connect 13 1 7 0;
#X connect 14 0 11 0;
#X connect 15 0 3 0;
#X connect 15 1 0 0;
#X connect 15 2 1 0;
#X connect 15 3 2 0;
#X connect 15 4 4 0;
#X connect 15 5 5 0;
#X connect 15 6 6 0;
#X connect 16 0 14 0;
#X connect 16 0 17 0;
#X connect 16 1 14 1;
#X connect 16 1 19 0;
#X connect 16 2 14 2;
#X connect 16 2 18 0;
#X connect 21 0 10 0;
#X connect 21 1 15 1;
#X connect 22 0 16 0;
#X connect 22 1 15 0;
#X restore 323 119 pd vcf-coefficients(cpole);
#X text 15 87 FREQ;
#X obj 62 56 hsl 200 15 0 136 0 1 empty empty empty -2 -8 0 10 -228856
-1 -1 8100 1;
#X obj 615 161 cnv 15 40 18 empty empty empty 20 12 0 14 -261234 -66577
0;
#X text 620 159 ===>;
#N canvas 163 61 392 567 coef 0;
#X obj 62 48 inlet;
#X obj 60 198 t f f;
#X obj 60 168 clip 0 1;
#X obj 62 124 expr $f1 * 2 * pi_\$0 / sr_\$0;
#X obj 60 93 mtof;
#X obj 64 463 outlet;
#X obj 45 327 list prepend set;
#X obj 45 355 list trim;
#X obj 45 383 t b a;
#X obj 60 257 pack;
#X obj 89 228 expr 1 - $f1;
#X connect 0 0 4 0;
#X connect 1 0 9 0;
#X connect 1 1 10 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 5 0;
#X connect 8 1 5 0;
#X connect 9 0 6 0;
#X connect 10 0 9 1;
#X restore 59 121 pd coef;
#X floatatom 59 88 0 0 0 0 - - -;
#X msg 59 171 0.0285064 0.971494;
#X text 333 150 gain \, coef (a_Re \, a_Im);
#X text 71 147 gain \, coef (a_Re);
#N canvas 182 297 990 435 graph 1;
#X obj 94 11 cnv 15 848 400 empty empty empty 18 9 1 16 -262144 -1
0;
#X text 904 390 -24;
#X obj 427 21 cnv 15 15 15 empty empty Kilohertz 18 9 1 16 -262144
-1 0;
#X obj 900 221 cnv 15 15 15 empty empty dB 18 9 1 17 -262144 -1 0;
#X text 904 305 -12;
#X obj 101 60 cnv 15 798 85 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 101 144 cnv 15 798 85 empty empty empty 20 12 0 14 -241340 -66577
0;
#X obj 101 230 cnv 15 798 85 empty empty empty 20 12 0 14 -257983 -66577
0;
#X obj 101 315 cnv 15 798 85 empty empty empty 20 12 0 14 -241340 -66577
0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 77 170 1;
#X restore 219 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 80 170 1;
#X restore 296 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 102 170 1;
#X restore 376 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 478 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 556 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 103 170 1;
#X restore 634 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 737 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 815 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 100 170 1;
#X restore 119 60 graph;
#N canvas 391 118 975 563 (subpatch) 0;
#X array \$0-response 400 float 0;
#X coords 0 1 399 -1 800 340 1;
#X restore 100 60 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 77 170 1;
#X restore 219 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 80 170 1;
#X restore 296 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 102 170 1;
#X restore 376 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 478 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 556 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 103 170 1;
#X restore 634 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 737 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 78 170 1;
#X restore 815 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 100 170 1;
#X restore 119 230 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 800 170 1;
#X restore 100 60 graph;
#X text 904 135 12;
#X text 903 52 24;
#X obj 96 44 cnv 15 810 15 empty empty empty 18 9 1 16 -262144 -1 0
;
#X text 807 42 10;
#X text 884 43 20;
#X text 732 42 5;
#X text 629 42 2;
#X text 551 43 1;
#X text 465 43 0.5;
#X text 363 43 0.2;
#X text 283 43 0.1;
#X text 206 43 0.05;
#X text 106 43 0.02;
#X text 905 221 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X coords 0 1 100 -1 850 402 1;
#X restore 93 12 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 800 170 1;
#X restore 100 144 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 800 170 1;
#X restore 100 230 graph;
#N canvas 607 22 664 707 plot 0;
#X obj 143 83 t bang list;
#N canvas 159 22 181 220 loop 0;
#X obj 28 100 until;
#X obj 68 138 + 1;
#X msg 72 100 0;
#X obj 28 137 f;
#X obj 28 13 inlet;
#X obj 28 173 outlet;
#X obj 28 42 trigger b b;
#X obj 28 71 v table_size_\$0;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 3 1;
#X connect 3 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 2 0;
#X connect 7 0 0 0;
#X restore 143 117 pd loop;
#X obj 143 148 t f f;
#X obj 231 119 list split 1;
#X obj 170 193 s \$0-index;
#X obj 257 252 s \$0-gain;
#N canvas 70 96 630 550 init 0;
#X obj 97 16 loadbang;
#X obj 180 353 s \$0-dbrange;
#X obj 282 91 samplerate~;
#X obj 282 114 v sr_\$0;
#X msg 217 289 400;
#X obj 460 115 table re1_\$0 400;
#X obj 460 135 table im1_\$0 400;
#X obj 460 155 table re2_\$0 400;
#X obj 460 175 table im2_\$0 400;
#N canvas 111 22 382 450 get-complex-freqs 0;
#X msg 232 232 resize \$1;
#X obj 281 276 s re1_\$0;
#X obj 267 301 s im1_\$0;
#X obj 256 332 s re2_\$0;
#X obj 247 362 s im2_\$0;
#X obj 12 299 tabwrite re1_\$0;
#X obj 108 394 tabwrite im2_\$0;
#X obj 232 393 s amp_\$0;
#X obj 50 80 change;
#X obj 251 171 v table_size_\$0;
#X obj 50 113 trigger bang float;
#X obj 232 206 change 400;
#X obj 50 43 inlet;
#X obj 76 363 tabwrite re2_\$0;
#X obj 43 335 tabwrite im1_\$0;
#X obj 50 182 expr cos($f1) \; sin($f1) \; cos($f1 * 2) \; sin($f1
* 2) \; $f2;
#N canvas 11 46 935 668 loop 0;
#X obj 106 192 until;
#X obj 144 241 + 1;
#X msg 124 216 0;
#X obj 106 95 t f f;
#X obj 483 216 until;
#X obj 529 265 + 1;
#X msg 501 241 0;
#X obj 106 270 t f f;
#X obj 211 355 +;
#X obj 106 370 mtof;
#X obj 106 144 t f b f;
#X obj 483 191 t f b f;
#X obj 483 326 /;
#X obj 106 31 inlet;
#X obj 106 574 outlet;
#X obj 259 583 outlet;
#X obj 483 144 expr table_size_\$0 - $f1;
#X obj 483 265 f;
#X obj 483 379 expr pow($f1 \, 0.4);
#X obj 106 241 f;
#X obj 483 296 trigger f f;
#X obj 106 63 expr rint(table_size_\$0 * 0.98);
#X obj 483 407 * 20.6017;
#X text 556 407 MIDI 16;
#X obj 483 498 expr $f1 * (2 * -pi_\$0) / 44100;
#X obj 106 465 expr $f1 * (2 * -pi_\$0) / 44100;
#X obj 86 33 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 106 298 expr (($f1 + 1) * (midi_range_\$0 / $f2)) + 16;
#X connect 0 0 19 0;
#X connect 1 0 19 1;
#X connect 2 0 19 1;
#X connect 3 0 10 0;
#X connect 3 1 16 0;
#X connect 4 0 17 0;
#X connect 5 0 17 1;
#X connect 6 0 17 1;
#X connect 7 0 27 0;
#X connect 7 1 8 0;
#X connect 8 0 15 0;
#X connect 9 0 25 0;
#X connect 10 0 0 0;
#X connect 10 1 2 0;
#X connect 10 2 27 1;
#X connect 11 0 4 0;
#X connect 11 1 6 0;
#X connect 11 2 12 1;
#X connect 12 0 18 0;
#X connect 13 0 21 0;
#X connect 16 0 8 1;
#X connect 16 0 11 0;
#X connect 17 0 5 0;
#X connect 17 0 20 0;
#X connect 18 0 22 0;
#X connect 19 0 1 0;
#X connect 19 0 7 0;
#X connect 20 0 12 0;
#X connect 20 1 15 0;
#X connect 21 0 3 0;
#X connect 22 0 24 0;
#X connect 24 0 14 0;
#X connect 25 0 14 0;
#X connect 26 0 21 0;
#X connect 27 0 9 0;
#X restore 50 143 pd loop;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 0 0 4 0;
#X connect 0 0 7 0;
#X connect 8 0 10 0;
#X connect 10 0 16 0;
#X connect 10 1 9 0;
#X connect 10 1 11 0;
#X connect 11 0 0 0;
#X connect 12 0 8 0;
#X connect 15 0 5 0;
#X connect 15 1 14 0;
#X connect 15 2 13 0;
#X connect 15 3 6 0;
#X connect 15 4 5 1;
#X connect 15 4 14 1;
#X connect 15 4 13 1;
#X connect 15 4 6 1;
#X connect 16 0 15 0;
#X connect 16 1 15 1;
#X restore 217 317 pd get-complex-freqs;
#X text 247 289 array size;
#X obj 97 52 trigger b b b;
#X msg 180 320 24;
#X obj 273 193 v midi_range_\$0;
#X obj 273 167 ftom;
#X msg 273 141 8750.55;
#X obj 265 224 expr atan(1) * 4;
#X obj 266 255 v pi_\$0;
#X obj 110 346 t b b;
#X msg 64 473 1.98562 -0.986364 0.00681816 0 -0.00681816;
#X obj 65 500 s \$0-coefficients;
#X msg 146 395 \; q-set 10 \; freq-set 1000 \; pd dsp 1;
#X connect 0 0 11 0;
#X connect 2 0 3 0;
#X connect 4 0 9 0;
#X connect 11 0 18 0;
#X connect 11 1 4 0;
#X connect 11 1 12 0;
#X connect 11 2 2 0;
#X connect 11 2 15 0;
#X connect 11 2 16 0;
#X connect 12 0 1 0;
#X connect 14 0 13 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 18 0 19 0;
#X connect 18 1 21 0;
#X connect 19 0 20 0;
#X restore 390 488 pd init \; tables;
#X obj 150 36 inlet;
#X obj 260 216 f;
#X obj 87 326 tabread re1_\$0;
#X obj 210 334 tabread im1_\$0;
#X obj 85 239 t b f;
#X obj 45 287 s get_amp;
#X obj 372 197 unpack;
#X obj 371 243 v a_Re;
#X obj 435 247 v a_Im;
#X obj 95 358 v freq_Re;
#X obj 213 363 v freq_Im;
#X obj 155 570 tabwrite \$0-response;
#N canvas 121 22 226 277 db-scale 0;
#X obj 42 31 inlet;
#X obj 42 61 rmstodb;
#X obj 42 90 - 100;
#X obj 98 61 r \$0-dbrange;
#X obj 108 109 * -1;
#X obj 41 147 clip;
#X obj 80 183 /;
#X obj 80 216 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 3 0 5 2;
#X connect 3 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X restore 155 540 pd db-scale;
#X obj 155 517 *;
#X obj 276 544 r \$0-index;
#X obj 192 508 r \$0-gain;
#X obj 155 461 r amp;
#X connect 0 0 1 0;
#X connect 0 1 3 0;
#X connect 1 0 2 0;
#X connect 2 0 11 0;
#X connect 2 1 4 0;
#X connect 3 0 8 0;
#X connect 3 1 13 0;
#X connect 7 0 0 0;
#X connect 8 0 5 0;
#X connect 9 0 16 0;
#X connect 10 0 17 0;
#X connect 11 0 12 0;
#X connect 11 1 10 0;
#X connect 11 1 9 0;
#X connect 13 0 14 0;
#X connect 13 1 15 0;
#X connect 19 0 18 0;
#X connect 20 0 19 0;
#X connect 21 0 18 1;
#X connect 22 0 20 1;
#X connect 23 0 20 0;
#X restore 20 62 pd plot;
#X obj 20 28 inlet;
#X connect 47 0 46 0;
#X restore 323 210 pd graph;
#X text 326 27 single complex pole bandpass [vcf~];
#X text 57 24 single real pole lowpass [lop~];
#N canvas 442 22 535 471 descriptive-text 0;
#X text -376 -10 The left part of the patch generates coefficients
for a real pole and a complex pole. These are used to get the frequency
response in the [pd graph] patch. This is working for a real pole but
needs to be adapted for complex pole. The plot is possible via the
subpatch [pd Z-Transform] \, which is based on the transfer function
of the real pole. Though the transfer function of a complex pole is
said to be exactly the same \, it still needs to be adapted into a
complex version.;
#X text -375 135 This version needs to take a complex coefficient (a_Re
and a_IM). Moreover \, a complex version would necessarily have two
inputs (real and imaginary part) and two distinct frequency responses
(or outputs) - also the real and imaginary part.;
#X text -373 221 If the complex system has only one input and only
a real coeficient \, its real output needs to plot the same frequency
response as the real version.;
#X text -368 276 My main goal is to plot the frequency response of
the two outputs of [vcf~] \, which is a wrap around of [cpole~] \,
but only filters a real signal. Therefore \, I'm happy with an adaptation
of this patch that considers a real input and a complex output.;
#X text -368 364 I'm also happy if it takes a single real inut and
only plots the freq response of the real output only.;
#X restore 624 87 pd descriptive-text;
#X connect 0 0 7 0;
#X connect 2 0 7 1;
#X connect 4 0 0 0;
#X connect 5 0 17 0;
#X connect 7 0 5 0;
#X connect 9 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 14 0 17 0;
