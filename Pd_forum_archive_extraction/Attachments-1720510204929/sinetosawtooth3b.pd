#N canvas 147 171 876 529 10;
#X obj 63 44 osc~ 220;
#X floatatom 63 15 5 0 0 0 - - -;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-array 1000 float 0;
#X coords 0 2 999 -1 320 450 1 0 0;
#X restore 524 19 graph;
#X obj 49 440 tabwrite~ \$0-array;
#X obj 57 414 metro 100;
#X obj 57 389 loadbang;
#X text 111 -15 sine to sawtooth with frequency extraction all signal
level;
#X obj 205 343 phasor~;
#X obj 238 201 mtof;
#X obj 238 227 / 220;
#X obj 238 176 + 57;
#X floatatom 238 153 5 0 0 0 - - -;
#X floatatom 238 252 8 0 0 0 - - -;
#X text 275 152 adjust for second voice (halftones);
#X text 47 467 phasor entirely controlled by incoming signal but freely
transposable;
#X msg 325 399 \; pd dsp 1;
#X msg 392 399 \; pd dsp 0;
#X obj 560 435 s \$0-array;
#X msg 560 408 arrayviewlistnew;
#X floatatom 284 218 5 0 0 0 - - -;
#X text 508 11 2;
#X text 503 456 -1;
#X text 319 192 midinote;
#X floatatom 284 193 5 0 0 0 - - -;
#X text 318 218 frequency (Hz);
#X obj 62 287 unsig~;
#X floatatom 62 312 8 0 0 0 - - -;
#X obj 48 344 phasor~;
#X obj 230 366 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X floatatom 240 393 5 0 0 0 - - -;
#X obj 171 393 *~ 0;
#X obj 206 393 *~ 0;
#X text 291 251 frequency ratio;
#N canvas 53 120 660 556 period-detect 0;
#X obj 20 11 inlet~;
#X obj 84 86 samplerate~;
#X floatatom 161 127 8 0 0 0 - - -;
#X floatatom 161 103 8 0 0 0 - - -;
#X obj 23 512 outlet~;
#X obj 22 399 rpole~;
#X obj 20 203 *~ 1e+07;
#X obj 23 454 samphold~;
#X obj 67 348 *~ -1;
#X obj 67 372 +~ 1;
#X obj 21 373 sig~ 1;
#X obj 20 233 clip~ 0 1;
#X text 78 201 scale up;
#X obj 20 323 expr~ $v1==1;
#X text 86 230 convert sine to rectangle (0 - 1);
#X obj 22 426 zexy/z~ 2;
#X text 67 397 integrator (sample counter);
#X text 87 424 2 samples delay;
#X text 85 454 hold nr of samples per cycle;
#X obj 84 11 inlet;
#X obj 24 480 *~ 0.25;
#X obj 84 110 /;
#X obj 84 35 t b f;
#X msg 320 52 set 64 1 \$1;
#X floatatom 161 152 8 0 0 0 - - -;
#X obj 297 463 /;
#X obj 297 409 t b f;
#X msg 297 437 1;
#X obj 84 135 * 0.25;
#X text 215 103 resampled rate;
#X text 218 126 audio rate;
#X text 217 152 filter cut off frequency (Hz);
#X obj 35 259 zexy/z~;
#X obj 19 294 -~;
#X text 47 293 differentiate: convert rectangles to pulses (-1 and
1);
#X text 100 321 positive pulse = upward slope in original signal;
#X text 77 512 period in nr of samples;
#X obj 320 76 block~ 64 1 1;
#X text 94 259 one sample delay;
#N canvas 1 79 450 300 (subpatch) 0;
#X array \$0-array2 1000 float 0;
#X coords 0 1 999 -1 200 140 1;
#X restore 427 246 graph;
#X obj 427 165 metro 100;
#X obj 427 140 loadbang;
#X obj 427 191 tabwrite~ \$0-array2;
#X obj 427 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 20 175 iemlib/lp6_butt~ 11025;
#X obj 84 62 delay 20;
#X connect 0 0 44 0;
#X connect 1 0 3 0;
#X connect 1 0 21 0;
#X connect 5 0 15 0;
#X connect 6 0 11 0;
#X connect 7 0 20 0;
#X connect 8 0 9 0;
#X connect 9 0 5 1;
#X connect 10 0 5 0;
#X connect 11 0 33 0;
#X connect 11 0 32 0;
#X connect 13 0 8 0;
#X connect 13 0 7 1;
#X connect 15 0 7 0;
#X connect 19 0 26 0;
#X connect 19 0 22 0;
#X connect 20 0 4 0;
#X connect 21 0 2 0;
#X connect 21 0 28 0;
#X connect 22 0 45 0;
#X connect 22 1 21 1;
#X connect 22 1 23 0;
#X connect 23 0 37 0;
#X connect 25 0 20 1;
#X connect 26 0 27 0;
#X connect 26 1 25 1;
#X connect 27 0 25 0;
#X connect 28 0 24 0;
#X connect 28 0 44 1;
#X connect 32 0 33 1;
#X connect 33 0 13 0;
#X connect 40 0 42 0;
#X connect 41 0 40 0;
#X connect 43 0 41 0;
#X connect 44 0 6 0;
#X connect 44 0 42 0;
#X connect 45 0 1 0;
#X restore 64 71 pd period-detect;
#X msg 189 15 2;
#X msg 220 15 4;
#X msg 252 15 8;
#X obj 48 177 samplerate~;
#X obj 48 151 loadbang;
#X obj 48 206 sig~ 44100;
#X obj 47 257 /~;
#X obj 48 126 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 123 100 unsig~;
#X floatatom 123 125 8 0 0 0 - - -;
#X text 175 125 period length (nr of samples;
#X msg 157 15 1;
#X text 279 13 upsampling rate;
#X text 119 205 convert to freq;
#X floatatom 157 45 5 0 0 0 - - -;
#X text 113 311 frequency (Hz);
#X obj 184 424 dac~;
#X obj 205 273 *~ 1.5;
#X connect 0 0 33 0;
#X connect 1 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 7 0 31 0;
#X connect 8 0 9 0;
#X connect 8 0 19 0;
#X connect 9 0 12 0;
#X connect 10 0 8 0;
#X connect 10 0 23 0;
#X connect 11 0 10 0;
#X connect 12 0 51 1;
#X connect 18 0 17 0;
#X connect 25 0 26 0;
#X connect 27 0 3 0;
#X connect 27 0 30 0;
#X connect 28 0 29 0;
#X connect 28 0 30 1;
#X connect 28 0 31 1;
#X connect 30 0 50 0;
#X connect 31 0 50 1;
#X connect 33 0 40 1;
#X connect 33 0 42 0;
#X connect 34 0 48 0;
#X connect 35 0 48 0;
#X connect 36 0 48 0;
#X connect 37 0 39 0;
#X connect 38 0 37 0;
#X connect 39 0 40 0;
#X connect 40 0 25 0;
#X connect 40 0 51 0;
#X connect 40 0 27 0;
#X connect 41 0 38 0;
#X connect 42 0 43 0;
#X connect 45 0 48 0;
#X connect 48 0 33 1;
#X connect 51 0 7 0;
