#N canvas 40 134 834 418 10;
#X obj 319 31 adc~;
#X obj 639 44 loadbang;
#X obj 650 96 tabwrite impulse;
#X obj 450 144 tabplay~ impulse;
#X obj 512 90 r play_impulses;
#X obj 456 246 dac~;
#N canvas 188 213 752 463 reverb_meas 0;
#X obj 29 35 inlet~;
#X obj 128 34 inlet~;
#N canvas 110 48 692 497 add_it_up 0;
#X obj 46 30 inlet~;
#X obj 46 105 +~;
#X obj 106 75 *~ 1;
#X obj 227 31 r reset;
#X msg 178 56 0;
#X obj 207 80 delay 1480;
#X msg 179 106 1;
#X obj 44 248 outlet~;
#X obj 81 131 delwrite~ fb 1486.08;
#X obj 95 6 delread~ fb 1486.08;
#X obj 482 17 inlet~;
#X obj 480 115 +~;
#X obj 302 5 delread~ fb2 1486.08;
#X obj 311 75 *~ 1;
#X obj 300 135 delwrite~ fb2 1486.08;
#X obj 484 244 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 1 0 7 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 4 0 5 0;
#X connect 4 0 13 1;
#X connect 5 0 6 0;
#X connect 6 0 2 1;
#X connect 6 0 13 1;
#X connect 9 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 14 0;
#X connect 11 0 15 0;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X restore 29 132 pd add_it_up;
#N canvas 0 0 463 567 calculations 0;
#X obj 41 41 inlet~;
#X obj 236 41 r refresh;
#X obj 236 68 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0 1
;
#X obj 323 42 bang~;
#X obj 29 298 cnormsq~;
#X obj 119 303 atan2~;
#X obj 30 352 expr~ 10*log10($v1)+100;
#X obj 274 300 *~;
#X obj 275 348 expr~ 10*log10($v1)+100;
#X obj 28 395 tabwrite~ freq_resp_db;
#X obj 114 430 tabwrite~ phase_resp;
#X obj 245 395 tabwrite~ reverb_signal;
#X obj 277 429 tabwrite~ reverb_signal_db;
#X obj 175 249 ==~;
#X obj 158 275 +~;
#X obj 236 92 switch~ 65536;
#X obj 123 37 inlet~;
#X obj 42 108 fft~;
#X obj 123 106 fft~;
#X obj 74 147 cdiv~;
#X obj 155 178 ifft~;
#X obj 189 208 /~ 65536;
#X connect 0 0 17 0;
#X connect 1 0 2 0;
#X connect 2 0 15 0;
#X connect 3 0 2 0;
#X connect 3 0 9 0;
#X connect 3 0 10 0;
#X connect 3 0 11 0;
#X connect 3 0 12 0;
#X connect 4 0 6 0;
#X connect 5 0 10 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 13 0 14 1;
#X connect 14 0 5 1;
#X connect 16 0 18 0;
#X connect 17 0 19 0;
#X connect 17 1 19 1;
#X connect 18 0 19 2;
#X connect 18 1 19 3;
#X connect 19 0 4 0;
#X connect 19 0 13 0;
#X connect 19 0 14 0;
#X connect 19 0 20 0;
#X connect 19 1 4 1;
#X connect 19 1 5 0;
#X connect 19 1 20 1;
#X connect 20 0 21 0;
#X connect 21 0 7 0;
#X connect 21 0 7 1;
#X connect 21 0 11 0;
#X restore 28 165 pd calculations;
#N canvas 0 0 450 300 make_bangs 0;
#X obj 163 50 block~ 131072;
#X obj 167 85 bang~;
#X obj 167 115 s bangs;
#X connect 1 0 2 0;
#X restore 236 110 pd make_bangs;
#X obj 237 64 block~ 65536;
#N canvas 0 0 467 442 CSD_and_PSD 0;
#X obj 51 48 inlet~;
#X obj 110 48 inlet~;
#X obj 262 48 switch~ 131072 2;
#X obj 258 89 table rectangle 131072;
#X obj 191 109 tabplay~ rectangle;
#X obj 191 89 bang~;
#X text 20 21 recieved;
#X text 118 23 reference;
#X obj 53 118 rfft~;
#X obj 143 118 rfft~;
#X obj 54 414 outlet~;
#X obj 53 330 *~;
#X obj 256 139 table ones 65536;
#X obj 54 371 /~ 131072;
#X obj 144 86 *~;
#X obj 103 170 conj_mult~;
#X obj 22 169 conj_mult~;
#X obj 102 118 rfft~;
#X obj 151 415 outlet~;
#X obj 150 331 *~;
#X obj 151 372 /~ 131072;
#X obj 37 221 rifft~;
#X obj 110 222 rifft~;
#X obj 262 22 r CSD_PSD_on;
#X connect 0 0 8 0;
#X connect 1 0 14 0;
#X connect 1 0 17 0;
#X connect 4 0 11 1;
#X connect 4 0 14 1;
#X connect 4 0 19 1;
#X connect 5 0 4 0;
#X connect 8 0 16 0;
#X connect 8 1 16 1;
#X connect 9 0 16 2;
#X connect 9 0 15 2;
#X connect 9 1 16 3;
#X connect 9 1 15 3;
#X connect 11 0 13 0;
#X connect 13 0 10 0;
#X connect 14 0 9 0;
#X connect 15 0 22 0;
#X connect 15 1 22 1;
#X connect 16 0 21 0;
#X connect 16 1 21 1;
#X connect 17 0 15 0;
#X connect 17 1 15 1;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 21 0 11 0;
#X connect 22 0 19 0;
#X connect 23 0 2 0;
#X restore 29 101 pd CSD_and_PSD;
#X connect 0 0 6 0;
#X connect 1 0 6 1;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 6 0 2 0;
#X connect 6 1 2 1;
#X restore 318 60 pd reverb_meas;
#X obj 448 62 table impulse 64;
#X obj 411 32 z~ 0;
#N canvas 0 0 631 567 sync_it_up 0;
#X obj 33 44 inlet~;
#X obj 138 44 inlet~;
#X obj 421 67 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0 1
;
#N canvas 0 0 450 300 graph15 0;
#X array rec 32768 float 2;
#X coords 0 0.1 32767 -0.1 500 140 1;
#X restore 36 168 graph;
#X obj 31 94 tabwrite~ rec;
#X obj 163 70 bang~;
#X obj 139 110 tabwrite~ ref;
#N canvas 0 0 450 300 graph16 0;
#X array ref 32768 float 2;
#X coords 0 1 32767 -1 500 140 1;
#X restore 35 316 graph;
#X text 395 41 switch on/off here;
#X obj 294 97 nbx 5 14 0 32768 0 1 sync empty sync 0 -6 0 10 -262144
-1 -1 0 256;
#X obj 421 102 switch~ 32768 2;
#X connect 0 0 4 0;
#X connect 1 0 6 0;
#X connect 2 0 10 0;
#X connect 5 0 6 0;
#X connect 5 0 4 0;
#X restore 212 82 pd sync_it_up;
#X obj 435 9 r sync;
#X obj 37 35 tgl 15 0 play_impulses empty play_impulses 0 -6 0 8 -262144
-1 -1 0 1;
#X obj 35 73 tgl 15 0 CSD_PSD_on empty switch_on_running_calculations
0 -6 0 8 -262144 -1 -1 0 1;
#X obj 35 108 bng 15 250 50 0 reset empty reset_running_calculations
0 -6 0 8 -262144 -1 -1;
#X obj 35 147 bng 15 250 50 0 refresh empty calculate_and_refresh_tables
0 -6 0 8 -262144 -1 -1;
#X text 209 99 open up the sync_it_up patch;
#X text 207 114 and adjust by hand so that;
#X text 210 145 comes just a little after;
#X text 206 130 the received signal \, rec;
#X text 208 160 the reference signal \, ref;
#X msg 667 149 \; ones const 1 \; rectangle const 0 \;;
#X obj 638 120 t b b;
#X obj 638 231 arraycopy rectangle;
#X msg 638 200 copy ones;
#X obj 459 120 spigot 0;
#X obj 450 89 r bangs;
#N canvas 0 16 999 676 freaky_deaky_impulses 0;
#X obj 27 31 inlet~;
#X obj 29 424 outlet~;
#X obj 30 388 *~;
#X obj 29 200 +~;
#X obj 16 96 ds~ 1000 300;
#X obj 110 96 ds~ 2000 300;
#X obj 212 95 ds~ 3000 300;
#X obj 314 95 ds~ 4000 300;
#X obj 407 95 ds~ 5000 300;
#X obj 511 94 ds~ 6000 300;
#X obj 612 93 ds~ 7000 300;
#X obj 708 94 ds~ 8000 300;
#X obj 802 93 ds~ 9000 300;
#X obj 893 93 ds~ 10000 300;
#X obj 15 136 ds~ 11000 300;
#X obj 106 135 ds~ 12000 300;
#X obj 211 135 ds~ 13000 300;
#X obj 313 135 ds~ 14000 300;
#X obj 409 134 ds~ 15000 300;
#X obj 508 134 ds~ 16000 300;
#X obj 611 132 ds~ 17000 300;
#X obj 707 134 ds~ 18000 300;
#X obj 801 134 ds~ 19000 300;
#X obj 892 133 ds~ 20000 300;
#X obj 410 194 ds~ 21000 300;
#X obj 311 232 ds~ 50 600;
#X obj 110 341 +~;
#X obj 168 247 noise~;
#X obj 168 299 abs~;
#N canvas 0 0 450 300 sweep 0;
#X obj 66 159 osc~ 440;
#X obj 62 189 outlet~;
#X obj 74 56 osc~ 4;
#X obj 76 83 +~ 1;
#X obj 75 111 *~ 400;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X restore 91 270 pd sweep;
#X obj 168 271 *~ 0.3;
#X obj 403 231 ds~ 21650 300;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 9 0;
#X connect 0 0 10 0;
#X connect 0 0 11 0;
#X connect 0 0 12 0;
#X connect 0 0 13 0;
#X connect 0 0 14 0;
#X connect 0 0 15 0;
#X connect 0 0 16 0;
#X connect 0 0 17 0;
#X connect 0 0 18 0;
#X connect 0 0 19 0;
#X connect 0 0 20 0;
#X connect 0 0 21 0;
#X connect 0 0 22 0;
#X connect 0 0 23 0;
#X connect 0 0 24 0;
#X connect 0 0 25 0;
#X connect 0 0 31 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 3 0;
#X connect 7 0 3 0;
#X connect 8 0 3 0;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 11 0 3 0;
#X connect 12 0 3 0;
#X connect 13 0 3 0;
#X connect 14 0 3 0;
#X connect 15 0 3 0;
#X connect 16 0 3 0;
#X connect 17 0 3 0;
#X connect 18 0 3 0;
#X connect 19 0 3 0;
#X connect 20 0 3 0;
#X connect 21 0 3 0;
#X connect 22 0 3 0;
#X connect 23 0 3 0;
#X connect 24 0 3 0;
#X connect 25 0 3 0;
#X connect 26 0 2 1;
#X connect 27 0 30 0;
#X connect 28 0 26 1;
#X connect 29 0 26 0;
#X connect 30 0 28 0;
#X connect 31 0 3 0;
#X restore 451 177 pd freaky_deaky_impulses;
#X obj 30 280 table freq_resp_db 65536;
#X obj 30 308 table phase_resp 65536;
#X obj 30 343 table reverb_signal 65536;
#X obj 31 381 table reverb_signal_db 65536;
#X msg 650 70 0.005;
#X obj 77 187 metro 6000;
#X obj 74 225 s refresh;
#X obj 81 156 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0 1
;
#X obj 451 198 z~ 1000;
#X text 234 328 note: the scale on the graphs marked db should be 0
to 100;
#X connect 0 0 6 0;
#X connect 0 0 9 0;
#X connect 1 0 31 0;
#X connect 1 0 21 0;
#X connect 3 0 26 0;
#X connect 4 0 24 1;
#X connect 8 0 6 1;
#X connect 8 0 9 1;
#X connect 10 0 8 1;
#X connect 21 0 23 0;
#X connect 21 1 20 0;
#X connect 23 0 22 0;
#X connect 24 0 3 0;
#X connect 25 0 24 0;
#X connect 26 0 35 0;
#X connect 31 0 2 0;
#X connect 32 0 33 0;
#X connect 34 0 32 0;
#X connect 35 0 5 0;
#X connect 35 0 5 1;
#X connect 35 0 8 0;
