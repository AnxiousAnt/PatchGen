#N canvas 751 279 122 78 10;
#N canvas 298 40 1042 649 subpatch 0;
#X floatatom 103 138 7 0 0 0 - - -, f 7;
#X obj 166 350 dac~;
#X floatatom 103 122 7 0 0 0 - - -, f 7;
#X obj 11 83 adc~;
#X obj 5 144 mtof;
#X obj 187 196 +;
#X obj 52 103 bonk~;
#X obj 146 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -4034 -1
-1;
#X obj 51 57 loadbang;
#X obj 206 123 mtof;
#X obj 420 334 vd~ delay;
#X obj 426 310 *~;
#X obj 435 228 mtof;
#X obj 13 345 delwrite~ delay 20000;
#X obj 434 251 int;
#X floatatom 150 122 7 0 0 0 - - -, f 7;
#X obj 107 206 *~;
#X obj 204 102 random 200;
#X obj 381 157 expr 40000 / $f1;
#X obj 278 265 vline~;
#X obj 122 270 vcf~;
#X obj 343 394 vcf~;
#X obj 210 158 random 100;
#X obj 212 182 / 100;
#X floatatom 149 138 7 0 0 0 - - -, f 7;
#X obj 225 278 vline~;
#X obj 246 418 *~;
#X obj 348 114 random 100;
#X obj 164 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -4032 -1
-1;
#X obj 407 76 random 100;
#X obj 182 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -33289 -261682
-1;
#X obj 476 133 / 10;
#X obj 250 223 line;
#X obj 523 353 line;
#X obj 58 248 vline~;
#X obj 504 409 vline~;
#X obj 346 133 / 20;
#X msg 502 387 \$1 1000;
#X msg 56 226 \$1 400;
#X obj 177 168 t b;
#X obj 143 205 vline~;
#X obj 195 68 vline~;
#X obj 386 316 / 2;
#X msg 216 252 \$1 100;
#X msg 168 224 \$1 \$2;
#X obj 215 222 pack;
#X obj 326 234 expr 400 / $f1;
#X obj 23 169 * 3;
#X obj 240 123 * 0.05;
#X msg 193 44 \$1 150;
#X msg 520 333 \$1 200;
#X msg 247 203 \$1 400;
#X obj 513 54 vline~;
#X msg 471 32 \$1 \$2;
#X obj 436 25 pack;
#X obj 433 2 / 100;
#X obj 148 316 *~;
#X obj 353 3 random 50;
#X obj 679 290 vline~;
#X msg 637 268 \$1 \$2;
#X obj 602 261 pack;
#X obj 599 238 / 100;
#X obj 519 239 random 50;
#X obj 356 421 *~;
#X obj 522 201 sigmund~ notes;
#X obj 447 288 osc~ 0.2;
#X obj 22 412 delwrite~ delay2 10000;
#X obj 615 402 vd~ delay2;
#X obj 690 378 vline~;
#X msg 686 340 \$1 \$2;
#X obj 651 333 pack;
#X msg 122 43 minvel 20;
#X msg 53 80 thresh 10 30;
#X obj 563 445 *~;
#X obj 702 76 vline~;
#X msg 660 54 \$1 \$2;
#X obj 625 47 pack;
#X obj 622 24 / 100;
#X obj 547 21 random 50;
#X obj 22 249 osc~;
#X obj 333 326 bonk~;
#X obj 128 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -258113
-1 -1;
#X obj 190 449 vline~;
#X msg 187 393 \$1 40;
#X obj 242 9 random 100;
#X obj 20 297 *~;
#X obj 293 33 / 800;
#X obj 63 388 vcf~;
#X obj 612 367 - 0;
#X obj 568 311 random 8000;
#X obj 29 322 phasor~;
#X obj 35 365 *~;
#X obj 74 179 phasor~ 300;
#X obj 131 226 osc~;
#X obj 587 172 *~;
#X obj 628 172 vline~;
#X obj 560 118 noise~;
#X obj 714 213 pack;
#X obj 110 104 bng 15 250 50 0 empty empty empty 17 7 0 10 -257985
-1 -1;
#X obj 579 147 vcf~;
#X obj 747 247 random 200;
#X obj 355 31 moses 10;
#X obj 291 441 env~;
#X obj 146 180 * 30;
#X obj 560 374 line;
#X msg 557 354 \$1 20;
#X obj 475 108 random 100;
#X obj 30 212 * 0.5;
#X obj 6 122 sigmund~ notes;
#X obj 613 104 osc~ 4;
#X obj 352 457 sigmund~ notes;
#X obj 467 461 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 518 499 f;
#X obj 556 530 + 1;
#X floatatom 520 547 5 0 0 0 - - -, f 5;
#X obj 631 521 select 15;
#X msg 596 476 0;
#X msg 391 538 1 10;
#X obj 231 511 *~;
#X obj 275 511 *~;
#X obj 280 569 vline~;
#X obj 794 524 + 3;
#X obj 400 503 loadbang;
#X obj 702 499 random 50;
#X msg 527 600 1;
#X msg 634 586 0;
#X obj 450 598 + 1;
#X msg 625 554 0 100;
#X obj 449 575 random 40;
#X msg 264 609 0;
#X obj 86 503 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 113 537 f;
#X obj 112 577 + 1, f 4;
#X floatatom 169 653 5 0 0 0 - - -, f 5;
#X obj 234 641 + 3;
#X obj 288 649 random 20;
#X obj 447 533 select 20;
#X obj 112 608 select 40;
#X obj 607 79 random 100;
#X msg 388 609 0;
#X obj 792 105 random 5;
#X obj 806 140 select 0 1 2 3 4 5;
#X obj 871 207 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 791 363 \$1 \$2 \, 0 2 \$2;
#X obj 570 83 / 300;
#X obj 806 467 osc~;
#X obj 806 446 vline~;
#X obj 832 324 random 500;
#X obj 852 265 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 838 547 osc~;
#X obj 838 526 vline~;
#X obj 906 296 random 500;
#X obj 892 261 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 538 166 / 30;
#X obj 901 72 vline~;
#X msg 813 61 \$1 200;
#X msg 301 202 \$1 200;
#X msg 25 27 mask 4 0.7;
#N canvas 147 50 795 617 fft-analysis 0;
#X obj 94 511 *~;
#X obj 55 511 *~;
#X obj 413 356 *~;
#X obj 372 356 *~;
#X obj 372 379 +~;
#X obj 54 183 *~;
#X obj 54 158 inlet~;
#X obj 54 206 rfft~;
#X obj 54 560 *~;
#X obj 141 245 *~;
#X obj 372 333 rfft~;
#X obj 54 535 rifft~;
#X obj 54 583 outlet~;
#X obj 107 245 *~;
#X obj 107 268 +~;
#X text 458 408 modulus;
#X obj 107 420 *~;
#X obj 600 13 block~ 1024 4;
#X obj 107 398 clip~;
#X obj 87 184 tabreceive~ \$0-hann;
#X obj 599 53 loadbang;
#X obj 148 346 r squelch;
#X obj 147 369 expr 0.01*$f1*$f1;
#X obj 107 294 +~ 1e-20;
#X obj 108 480 *~ 0.00065;
#X obj 87 560 tabreceive~ \$0-hann;
#X obj 373 307 *~;
#X obj 373 282 inlet~;
#X obj 406 308 tabreceive~ \$0-hann;
#X obj 107 321 q8_rsqrt~;
#X obj 372 402 q8_sqrt~;
#X text 458 425 of control;
#X text 456 442 amplitude;
#X text 196 248 reciprocal;
#X text 199 267 modulus of;
#X text 195 287 filter input;
#X text 196 306 amplitude;
#X text 115 159 filter input;
#X text 438 282 control source;
#X text 434 332 Fourier transform;
#X text 28 17 Internal workings of the timbre stamping algorithm. First
the "filter input" is treated as in the compressor patch \, multiplying
each channel amplitude by one over its modulus (but limited by the
"squelch" parameter.) It is then multiplied by the modulus of the channel
amplitude for the control source (which is Fourier analyzed in parallel
with the filter input.);
#X text 145 422 multiply the two amplitude;
#X text 143 439 factors (for compression;
#X text 145 455 and to apply new timbre);
#X msg 599 76 \; pd dsp 1 \; window-size 1024 \; squelch 30 \;;
#X connect 0 0 11 1;
#X connect 1 0 11 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 30 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 13 0;
#X connect 7 0 13 1;
#X connect 7 0 1 0;
#X connect 7 1 9 0;
#X connect 7 1 9 1;
#X connect 7 1 0 0;
#X connect 8 0 12 0;
#X connect 9 0 14 1;
#X connect 10 0 3 0;
#X connect 10 0 3 1;
#X connect 10 1 2 0;
#X connect 10 1 2 1;
#X connect 11 0 8 0;
#X connect 13 0 14 0;
#X connect 14 0 23 0;
#X connect 16 0 24 0;
#X connect 18 0 16 0;
#X connect 19 0 5 1;
#X connect 20 0 44 0;
#X connect 21 0 22 0;
#X connect 22 0 18 2;
#X connect 23 0 29 0;
#X connect 24 0 0 1;
#X connect 24 0 1 1;
#X connect 25 0 8 1;
#X connect 26 0 10 0;
#X connect 27 0 26 0;
#X connect 28 0 26 1;
#X connect 29 0 18 0;
#X connect 30 0 16 1;
#X restore 128 512 pd fft-analysis;
#N canvas 0 110 565 454 hann-window 0;
#N canvas 0 50 450 300 (subpatch) 0;
#X array \$0-hann 1024 float 0;
#X coords 0 1 1023 0 300 100 1;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 37 88 r window-size;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 38 251 s window-sec;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 177 252 s window-hz;
#X obj 49 201 * 1000;
#X obj 49 228 s window-msec;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X obj 330 105 r window-hz;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X text 15 8 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 14 0;
#X connect 6 0 8 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 6 0;
#X connect 14 0 9 0;
#X connect 14 1 7 0;
#X connect 14 2 15 0;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 1 1;
#X connect 19 0 1 0;
#X connect 19 1 4 0;
#X connect 19 1 18 0;
#X restore 13 561 pd hann-window;
#X obj 31 526 s squelch;
#X obj 589 643 *~ 0.05;
#X msg 805 406 120 8 \, 0 \$1;
#X msg 837 486 180 8 \, 0 \$1;
#X obj 134 463 phasor~ 20;
#X obj 37 482 *~ 0.9;
#X connect 0 0 5 1;
#X connect 0 0 39 0;
#X connect 0 0 49 0;
#X connect 0 0 54 1;
#X connect 2 0 5 0;
#X connect 2 0 60 1;
#X connect 2 0 76 1;
#X connect 2 0 70 1;
#X connect 3 0 6 0;
#X connect 3 0 108 0;
#X connect 3 0 165 0;
#X connect 3 1 6 0;
#X connect 3 1 108 0;
#X connect 4 0 2 0;
#X connect 4 0 47 0;
#X connect 4 0 107 0;
#X connect 5 0 45 0;
#X connect 6 0 7 0;
#X connect 6 0 130 0;
#X connect 7 0 17 0;
#X connect 7 0 22 0;
#X connect 7 0 140 0;
#X connect 8 0 72 0;
#X connect 8 0 71 0;
#X connect 8 0 28 0;
#X connect 8 0 81 0;
#X connect 8 0 157 0;
#X connect 9 0 48 0;
#X connect 10 0 21 0;
#X connect 10 0 26 0;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 14 0 18 0;
#X connect 14 0 42 0;
#X connect 15 0 156 0;
#X connect 15 0 46 0;
#X connect 15 0 160 0;
#X connect 16 0 20 0;
#X connect 17 0 9 0;
#X connect 18 0 15 0;
#X connect 19 0 11 1;
#X connect 20 0 13 0;
#X connect 20 1 56 0;
#X connect 21 0 63 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 43 0;
#X connect 25 0 26 1;
#X connect 26 0 13 0;
#X connect 27 0 36 0;
#X connect 28 0 62 0;
#X connect 29 0 31 0;
#X connect 30 0 29 0;
#X connect 30 0 89 0;
#X connect 30 0 78 0;
#X connect 30 0 106 0;
#X connect 31 0 50 0;
#X connect 32 0 20 2;
#X connect 32 0 87 2;
#X connect 33 0 21 2;
#X connect 34 0 21 1;
#X connect 35 0 20 1;
#X connect 35 0 87 1;
#X connect 36 0 51 0;
#X connect 37 0 35 0;
#X connect 38 0 34 0;
#X connect 39 0 5 0;
#X connect 40 0 93 0;
#X connect 41 0 92 0;
#X connect 42 0 37 0;
#X connect 43 0 25 0;
#X connect 44 0 40 0;
#X connect 45 0 44 0;
#X connect 46 0 45 1;
#X connect 47 0 38 0;
#X connect 48 0 0 0;
#X connect 49 0 41 0;
#X connect 50 0 33 0;
#X connect 51 0 32 0;
#X connect 52 0 56 1;
#X connect 53 0 52 0;
#X connect 54 0 53 0;
#X connect 55 0 54 0;
#X connect 56 0 110 0;
#X connect 56 0 118 0;
#X connect 57 0 55 0;
#X connect 58 0 63 1;
#X connect 59 0 58 0;
#X connect 60 0 59 0;
#X connect 61 0 60 0;
#X connect 62 0 61 0;
#X connect 63 0 119 0;
#X connect 64 0 12 0;
#X connect 64 0 28 0;
#X connect 65 0 11 0;
#X connect 67 0 73 0;
#X connect 67 0 80 0;
#X connect 67 0 64 0;
#X connect 67 0 102 0;
#X connect 68 0 67 0;
#X connect 69 0 68 0;
#X connect 70 0 69 0;
#X connect 71 0 6 0;
#X connect 72 0 6 0;
#X connect 73 0 119 0;
#X connect 74 0 73 1;
#X connect 75 0 74 0;
#X connect 76 0 75 0;
#X connect 77 0 76 0;
#X connect 78 0 77 0;
#X connect 79 0 85 0;
#X connect 80 0 81 0;
#X connect 81 0 27 0;
#X connect 81 0 84 0;
#X connect 81 0 57 0;
#X connect 82 0 85 1;
#X connect 82 0 91 1;
#X connect 83 0 82 0;
#X connect 84 0 86 0;
#X connect 84 0 101 0;
#X connect 85 0 66 0;
#X connect 86 0 83 0;
#X connect 87 0 66 0;
#X connect 88 0 70 0;
#X connect 89 0 88 0;
#X connect 90 0 91 0;
#X connect 91 0 87 0;
#X connect 92 0 16 0;
#X connect 93 0 16 1;
#X connect 94 0 161 0;
#X connect 95 0 94 1;
#X connect 96 0 99 0;
#X connect 97 0 143 0;
#X connect 98 0 100 0;
#X connect 98 0 138 0;
#X connect 99 0 94 0;
#X connect 100 0 97 0;
#X connect 101 0 98 0;
#X connect 102 0 103 0;
#X connect 103 0 155 0;
#X connect 104 0 99 2;
#X connect 105 0 104 0;
#X connect 106 0 153 0;
#X connect 107 0 79 0;
#X connect 108 0 4 0;
#X connect 108 0 30 0;
#X connect 108 0 90 0;
#X connect 109 0 99 0;
#X connect 110 0 111 0;
#X connect 111 0 112 0;
#X connect 112 0 113 0;
#X connect 112 0 115 0;
#X connect 112 0 114 0;
#X connect 112 0 136 0;
#X connect 113 0 112 1;
#X connect 115 0 116 0;
#X connect 115 0 127 0;
#X connect 115 0 125 0;
#X connect 115 0 123 0;
#X connect 115 0 128 0;
#X connect 116 0 113 0;
#X connect 117 0 120 0;
#X connect 118 0 1 0;
#X connect 119 0 1 1;
#X connect 120 0 118 1;
#X connect 120 0 119 1;
#X connect 121 0 115 1;
#X connect 122 0 117 0;
#X connect 122 0 123 0;
#X connect 123 0 121 0;
#X connect 126 0 136 1;
#X connect 127 0 120 0;
#X connect 128 0 126 0;
#X connect 129 0 132 0;
#X connect 130 0 131 0;
#X connect 131 0 132 0;
#X connect 132 0 131 1;
#X connect 132 0 137 0;
#X connect 134 0 133 0;
#X connect 134 0 137 1;
#X connect 135 0 134 0;
#X connect 136 0 117 0;
#X connect 136 0 124 0;
#X connect 136 0 139 0;
#X connect 137 0 129 0;
#X connect 137 0 117 0;
#X connect 137 0 135 0;
#X connect 137 0 139 0;
#X connect 138 0 144 0;
#X connect 139 0 15 0;
#X connect 139 0 2 0;
#X connect 140 0 141 0;
#X connect 141 0 142 0;
#X connect 141 1 148 0;
#X connect 141 2 152 0;
#X connect 141 3 142 0;
#X connect 141 4 148 0;
#X connect 141 5 142 0;
#X connect 142 0 97 0;
#X connect 143 0 95 0;
#X connect 144 0 97 1;
#X connect 145 0 118 0;
#X connect 145 0 66 0;
#X connect 146 0 145 0;
#X connect 147 0 162 0;
#X connect 148 0 147 0;
#X connect 149 0 119 0;
#X connect 149 0 66 0;
#X connect 150 0 149 0;
#X connect 151 0 163 0;
#X connect 152 0 151 0;
#X connect 153 0 105 0;
#X connect 154 0 99 1;
#X connect 155 0 154 0;
#X connect 156 0 19 0;
#X connect 157 0 6 0;
#X connect 158 0 13 0;
#X connect 158 0 66 0;
#X connect 161 0 13 0;
#X connect 162 0 146 0;
#X connect 163 0 150 0;
#X connect 164 0 158 0;
#X connect 165 0 158 1;
#X coords 0 -1 1 1 100 61 2 100 100;
#X restore 6 3 pd subpatch;
