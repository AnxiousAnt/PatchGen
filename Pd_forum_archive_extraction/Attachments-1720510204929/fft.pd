#N canvas 66 26 886 645 12;
#X floatatom 686 483 0 0 0 0 - - -;
#X floatatom 192 192 0 0 0 0 - - -;
#X floatatom 90 191 0 0 0 0 - - -;
#N canvas 5 5 1009 705 fft-analysis 0;
#X obj 177 242 *~;
#X obj 146 242 *~;
#X obj 146 264 -~;
#X obj 242 243 *~;
#X obj 211 243 *~;
#X obj 211 265 +~;
#X obj 256 73 *~;
#X obj 225 73 *~;
#X obj 197 73 *~;
#X obj 166 73 *~;
#X obj 166 95 +~;
#X obj 136 124 *~;
#X obj 49 560 *~;
#X obj 365 179 rfft~;
#X obj 291 34 rfft~;
#X obj 490 598 *~;
#X obj 685 288 r window-size;
#X obj 751 201 r sample-rate;
#X obj 609 234 f;
#X obj 603 52 r sample-rate;
#X obj 578 29 r window-size;
#X obj 601 98 t b f;
#X obj 578 121 /;
#X obj 520 598 *~;
#X obj 50 540 *~;
#X obj 66 517 rifft~;
#X obj 50 586 outlet~;
#X obj 625 446 print~;
#X msg 624 418 bang;
#X text 115 517 inverse real FFT;
#X obj 589 210 bang~;
#X obj 516 424 line~;
#X obj 578 143 * 1000;
#X text 630 136 window size (msec);
#X obj 603 76 * 4;
#X obj 632 159 r speed;
#X obj 709 160 r location;
#X obj 640 235 +;
#X obj 633 200 *;
#X msg 704 198 0;
#X obj 609 341 +;
#X obj 600 298 t f f;
#X msg 516 396 \$1 \, \$2 \$3;
#X obj 516 369 pack 0 0 0;
#X obj 752 229 / 1000;
#X obj 609 269 *;
#X text 639 270 reading location (samples);
#X obj 637 381 / 4;
#X text 669 386 hop size (samples);
#X obj 564 464 sig~;
#X obj 534 463 +~;
#X text 638 82 (overlap times parent SR);
#X text 638 69 local sample rate;
#X obj 103 10 tabreceive~ phase-real;
#X obj 106 124 *~;
#X obj 106 146 +~;
#X obj 106 170 rsqrt~;
#X obj 225 95 -~;
#X obj 147 200 *~;
#X obj 207 200 *~;
#X obj 266 9 tabreceive~ phase-imag;
#X obj 31 481 sig~;
#X obj 14 411 t b f;
#X msg 14 432 1;
#X obj 28 455 /;
#X obj 187 496 tabsend~ phase-real;
#X obj 288 474 tabsend~ phase-imag;
#X obj 632 180 * 0.01;
#X obj 685 222 s speed;
#X obj 474 263 s see-location;
#X obj 598 618 block~ 2048 4;
#X floatatom 672 360 0 0 0 0 - - -;
#X obj 670 339 *;
#X obj 829 234 r transpo;
#X obj 829 256 * 0.01;
#X obj 831 277 + 69;
#X obj 832 298 mtof;
#X obj 832 320 / 440;
#X obj 689 316 t b f;
#X obj 14 390 r window-size;
#X floatatom 835 353 0 0 0 0 - - -;
#X obj 551 543 tabreceive~ hanning;
#X obj 145 422 -~;
#X obj 249 385 r lock;
#X obj 162 291 lrshift~ 1;
#X obj 154 315 lrshift~ -1;
#X obj 227 339 lrshift~ 1;
#X obj 219 363 lrshift~ -1;
#X obj 210 432 -~;
#X obj 161 397 *~ 0;
#X obj 226 408 *~ 0;
#X obj 50 71 sig~ 1e-015;
#X obj 534 489 tabread4~ FFT-sample;
#X obj 516 515 tabread4~ FFT-sample;
#N canvas 0 0 460 310 modify 0;
#X obj 71 39 inlet~;
#X obj 360 127 inlet~;
#X obj 131 259 outlet~;
#X obj 340 255 outlet~;
#X obj 93 74 *~;
#X obj 91 107 sqrt~;
#X obj 138 148 tabwrite~ FFT-spectrum;
#X obj 155 187 tabreceive~ FFT-modify;
#X obj 134 218 *~;
#X obj 340 220 *~;
#X obj 214 71 tgl 15 0 empty FFT-update-spectrum empty 0 -6 0 8 -262144
-1 -1 1 1;
#X obj 180 73 bng 15 250 50 0 empty FFT-update-spectrum-shot empty
0 -6 0 8 -262144 -1 -1;
#X obj 214 98 metro 2000;
#X msg 169 122 bang;
#X connect 0 0 4 0;
#X connect 0 0 4 1;
#X connect 0 0 8 0;
#X connect 1 0 9 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 8 1;
#X connect 7 0 9 0;
#X connect 8 0 2 0;
#X connect 9 0 3 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 6 0;
#X restore 93 472 pd modify;
#X text 79 453 spectrum design;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 2 0 84 0;
#X connect 2 0 85 0;
#X connect 2 0 82 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 86 0;
#X connect 5 0 87 0;
#X connect 5 0 88 0;
#X connect 6 0 57 1;
#X connect 7 0 57 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 58 1;
#X connect 10 0 54 0;
#X connect 10 0 54 1;
#X connect 11 0 55 1;
#X connect 12 0 26 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 13 1 0 1;
#X connect 13 1 4 1;
#X connect 14 0 9 1;
#X connect 14 0 7 1;
#X connect 14 1 6 1;
#X connect 14 1 8 1;
#X connect 15 0 14 0;
#X connect 16 0 72 0;
#X connect 17 0 44 0;
#X connect 18 0 37 0;
#X connect 18 0 45 0;
#X connect 18 0 69 0;
#X connect 19 0 34 0;
#X connect 20 0 22 0;
#X connect 21 0 22 0;
#X connect 21 1 22 1;
#X connect 22 0 32 0;
#X connect 23 0 13 0;
#X connect 24 0 12 0;
#X connect 25 0 24 1;
#X connect 28 0 27 0;
#X connect 30 0 18 0;
#X connect 31 0 27 0;
#X connect 31 0 50 0;
#X connect 31 0 93 0;
#X connect 32 0 43 2;
#X connect 32 0 38 1;
#X connect 34 0 21 0;
#X connect 35 0 67 0;
#X connect 36 0 18 1;
#X connect 37 0 18 1;
#X connect 38 0 37 1;
#X connect 39 0 68 0;
#X connect 40 0 43 1;
#X connect 41 0 43 0;
#X connect 41 1 40 0;
#X connect 42 0 31 0;
#X connect 43 0 42 0;
#X connect 44 0 45 1;
#X connect 45 0 41 0;
#X connect 47 0 49 0;
#X connect 49 0 50 1;
#X connect 50 0 92 0;
#X connect 53 0 9 0;
#X connect 53 0 6 0;
#X connect 54 0 55 0;
#X connect 55 0 56 0;
#X connect 56 0 58 0;
#X connect 56 0 59 0;
#X connect 57 0 59 1;
#X connect 57 0 11 0;
#X connect 57 0 11 1;
#X connect 58 0 1 0;
#X connect 58 0 4 0;
#X connect 59 0 0 0;
#X connect 59 0 3 0;
#X connect 60 0 7 0;
#X connect 60 0 8 0;
#X connect 61 0 24 0;
#X connect 62 0 63 0;
#X connect 62 1 64 1;
#X connect 63 0 64 0;
#X connect 64 0 61 0;
#X connect 67 0 38 0;
#X connect 71 0 47 0;
#X connect 71 0 40 1;
#X connect 72 0 71 0;
#X connect 73 0 74 0;
#X connect 74 0 75 0;
#X connect 75 0 76 0;
#X connect 76 0 77 0;
#X connect 77 0 78 0;
#X connect 77 0 80 0;
#X connect 78 0 72 0;
#X connect 78 1 72 1;
#X connect 79 0 62 0;
#X connect 81 0 23 1;
#X connect 81 0 15 1;
#X connect 81 0 12 1;
#X connect 82 0 65 0;
#X connect 82 0 94 0;
#X connect 83 0 90 1;
#X connect 83 0 89 1;
#X connect 84 0 89 0;
#X connect 85 0 89 0;
#X connect 86 0 90 0;
#X connect 87 0 90 0;
#X connect 88 0 66 0;
#X connect 88 0 94 1;
#X connect 89 0 82 1;
#X connect 90 0 88 1;
#X connect 91 0 10 0;
#X connect 92 0 23 0;
#X connect 93 0 15 0;
#X connect 94 0 25 0;
#X connect 94 1 25 1;
#X restore 518 285 pd fft-analysis;
#N canvas 260 23 667 709 phase-tables 0;
#N canvas 0 0 450 300 graph2 0;
#X array phase-imag 4096 float 0;
#X coords 0 1 4096 -1 400 300 1;
#X restore 172 290 graph;
#N canvas 0 0 450 300 graph3 0;
#X array phase-real 4096 float 0;
#X coords 0 1 4096 -1 400 300 1;
#X restore 170 17 graph;
#X msg 167 564 \; phase-real resize 4096 \; phase-imag resize 4096
;
#X restore 523 499 pd phase-tables;
#X obj 518 311 hip~ 5;
#X obj 518 341 *~;
#N canvas 96 21 737 587 loc&precess 0;
#X msg 317 52 set \$1;
#X obj 316 84 outlet;
#X obj 67 441 outlet;
#X obj 153 24 r location;
#X msg 80 365 set \$1;
#X obj 316 26 r speed;
#X obj 37 23 r see-location;
#X obj 49 55 t b f;
#X obj 64 167 f;
#X obj 36 80 int;
#X obj 36 104 sel 0;
#X msg 136 90 1;
#X msg 184 89 0;
#X obj 98 131 del 300;
#X obj 64 264 moses;
#X obj 199 148 r insamplenght;
#X msg 135 337 0;
#X msg 140 308 bang;
#X obj 174 196 /;
#X obj 342 149 r sample-rate;
#X obj 117 230 * 1000;
#X text 174 231 lunghezza campione in msec;
#X obj 20 393 float;
#X msg 17 364 bang;
#X obj 18 310 moses -10;
#X text 168 364 se sono arrivato a fine campione riparto da capo \,
se sono 10 msec prima dell'inizio vado alla fine (sto andando indietro)
;
#X msg 427 50 0;
#X obj 423 19 loadbang;
#X connect 0 0 1 0;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 7 1 8 1;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 0 13 0;
#X connect 11 0 9 1;
#X connect 12 0 9 1;
#X connect 13 0 12 0;
#X connect 13 0 8 0;
#X connect 14 0 24 0;
#X connect 14 1 17 0;
#X connect 15 0 18 0;
#X connect 16 0 2 0;
#X connect 17 0 16 0;
#X connect 18 0 20 0;
#X connect 19 0 18 1;
#X connect 20 0 14 1;
#X connect 20 0 22 1;
#X connect 22 0 2 0;
#X connect 23 0 22 0;
#X connect 24 0 23 0;
#X connect 24 1 4 0;
#X connect 26 0 1 0;
#X connect 27 0 26 0;
#X restore 90 163 pd loc&precess;
#N canvas 391 80 656 456 setlocprecess 0;
#X obj 191 87 inlet;
#X obj 73 80 inlet;
#X obj 187 110 s speed;
#X obj 73 109 s location;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X restore 90 214 pd setlocprecess;
#X msg 47 174 0;
#X obj 686 508 s transpo;
#X obj 684 434 r transpo;
#X msg 684 460 set \$1;
#N canvas 138 111 787 709 hanning-window 0;
#X obj 92 206 phasor~;
#X obj 92 234 cos~;
#X obj 23 328 tabwrite~ hanning;
#X obj 30 252 -~;
#X obj 28 218 sig~ 1;
#X msg 37 180 0;
#X text 141 13 CALCULATE HANNING;
#X text 141 27 WINDOW TABLE;
#N canvas 0 0 450 300 graph1 0;
#X array hanning 4096 float 0;
#X coords 0 1 4096 -1 400 300 1;
#X restore 275 281 graph;
#X obj 93 171 sig~;
#X text 175 148 sample rate / window size;
#X msg 23 144 bang;
#X obj 66 269 sig~ 0.5;
#X obj 49 300 *~;
#X obj 94 80 samplerate~;
#X obj 25 23 r window-size;
#X obj 25 53 t b f;
#X msg 275 547 \; hanning resize 4096;
#X obj 93 132 /;
#X connect 0 0 1 0;
#X connect 1 0 3 1;
#X connect 3 0 13 0;
#X connect 4 0 3 0;
#X connect 5 0 0 1;
#X connect 9 0 0 0;
#X connect 11 0 2 0;
#X connect 11 0 5 0;
#X connect 12 0 13 1;
#X connect 13 0 2 0;
#X connect 14 0 18 0;
#X connect 15 0 16 0;
#X connect 16 0 14 0;
#X connect 16 0 11 0;
#X connect 16 1 18 1;
#X connect 18 0 9 0;
#X restore 521 522 pd hanning-window;
#N canvas 194 37 409 603 output 0;
#X obj 62 191 t b;
#X obj 62 144 f;
#X obj 62 96 inlet;
#X text 67 76 mute;
#X obj 62 215 f;
#X msg 127 230 0;
#X msg 62 120 bang;
#X obj 62 167 moses 1;
#X obj 127 207 t b f;
#X obj 91 417 outlet;
#X msg 91 393 set \$1;
#X obj 175 154 moses 1;
#X obj 212 419 dbtorms;
#X obj 212 443 pack 0 100;
#X obj 175 130 r master-lvl;
#X obj 91 360 r master-lvl;
#X obj 78 269 s master-lvl;
#X obj 212 467 s master-amp;
#X connect 0 0 4 0;
#X connect 1 0 7 0;
#X connect 2 0 6 0;
#X connect 4 0 16 0;
#X connect 5 0 16 0;
#X connect 6 0 1 0;
#X connect 7 0 0 0;
#X connect 7 1 8 0;
#X connect 8 0 5 0;
#X connect 10 0 9 0;
#X connect 11 1 4 1;
#X connect 12 0 13 0;
#X connect 13 0 17 0;
#X connect 14 0 1 1;
#X connect 14 0 11 0;
#X connect 15 0 10 0;
#X connect 15 0 12 0;
#X restore 665 30 pd output;
#X msg 665 7 mute;
#X text 705 56 MASTER;
#X text 705 70 LEVEL;
#X obj 665 187 s master-lvl;
#X obj 659 307 line~;
#X obj 659 283 r master-amp;
#X text 38 115 set location;
#X text 37 129 and stop;
#X text 37 143 precession;
#X text 224 125 precession;
#X text 223 138 speed in;
#X text 223 152 hundredths;
#X text 683 400 transposition;
#X text 683 411 in cents;
#N canvas 132 255 898 420 insample 0;
#X obj 12 19 r read-sample;
#X obj 12 132 unpack s f;
#X obj 46 158 s insamprate;
#X obj 12 208 soundfiler;
#X obj 22 46 inlet;
#X obj 22 73 openpanel;
#X obj 22 101 pack s 50;
#X msg 12 184 read -resize \$1 FFT-sample;
#X obj 12 238 s insamplenght;
#X msg 20 289 \; FFT-sample resize 220500 \; insamplenght 220500;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 1 1 2 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X restore 523 473 pd insample;
#X obj 523 450 bng 15 250 50 0 empty empty read-sample 20 8 0 12 -262144
-1 -1;
#N canvas 134 56 791 523 startup 0;
#X msg 50 60 \; window-size 2048 \; transpo 0 \; pd dsp 1;
#X obj 51 31 loadbang;
#X obj 229 28 loadbang;
#X obj 233 51 samplerate~;
#X obj 229 73 s sample-rate;
#X obj 92 223 s lock;
#X floatatom 92 198 0 0 0 0 - - -;
#X msg 93 171 0;
#X msg 127 170 1;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 6 0;
#X restore 151 389 pd startup;
#X text 17 -2 FFT;
#X text 68 0 starting from phase locked vocoder from examples;
#X obj 227 172 hsl 300 20 -100 100 0 0 empty empty empty -2 -6 0 8
-262144 -1 -1 14950 1;
#N canvas 0 0 450 300 graph1 0;
#X array FFT-sample 617908 float 0;
#X coords 0 1 617907 -1 400 150 1;
#X restore 97 424 graph;
#X msg 374 152 0;
#X obj 666 54 vsl 30 128 0 100 0 0 empty FFT-master-volume empty 0
-8 0 8 -262144 -1 -1 12700 1;
#N canvas 0 0 884 460 spectrum 0;
#N canvas 0 0 450 300 graph21 0;
#X array FFT-spectrum 1024 float 0;
#X coords 0 200 1023 0 600 100 1;
#X restore 100 20 graph;
#N canvas 0 0 450 300 graph22 0;
#X array FFT-modify 1024 float 0;
#X coords 0 4 1023 0 600 100 1;
#X restore 100 126 graph;
#X obj 274 333 loadbang;
#X msg 273 363 \; FFT-modify const 1;
#X obj 72 322 tgl 15 0 FFT-update-spectrum empty update 0 -6 0 8 -262144
-1 -1 1 1;
#X obj 94 333 bng 15 250 50 0 FFT-update-spectrum-shot empty 1_shot
0 -6 0 8 -262144 -1 -1;
#X text 12 161 MODIFY -->;
#X connect 2 0 3 0;
#X restore 332 287 pd spectrum;
#X text 112 286 modify spectrum design -->;
#X text 53 345 TODO: - tune it up;
#X obj 506 378 dac~;
#N canvas 203 270 580 339 help 1;
#X text 26 21 1: load a sample (mono) clicking on the "read-sample"
button;
#X text 26 49 2: turn up the volume (the big vertical slider on the
right);
#X text 27 73 3: play with precessione speed (the big orizontal slider)
;
#X text 26 107 4: if you set the precessione speed to 0 you can set
the exact position with the numeric input below [pd lock&precess];
#X text 28 172 you can modify the spectrum design clicking on [pd spectrum]
;
#X text 27 199 turn on "update" to get the FFT-spectrum array updated
with the current spectrum you hear (this will produce clicks);
#X text 26 246 equalize the spectrum drawning the FFT-modify array
(the spectrum you hear will be multiplyed by FFT-modify);
#X restore 44 264 pd help;
#X connect 0 0 10 0;
#X connect 1 0 8 1;
#X connect 2 0 8 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 41 0;
#X connect 6 0 41 1;
#X connect 7 0 2 0;
#X connect 7 1 1 0;
#X connect 7 1 34 0;
#X connect 9 0 2 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 14 0 37 0;
#X connect 15 0 14 0;
#X connect 19 0 6 1;
#X connect 20 0 19 0;
#X connect 30 0 29 0;
#X connect 34 0 1 0;
#X connect 36 0 34 0;
#X connect 37 0 18 0;
