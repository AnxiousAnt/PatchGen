#N canvas 37 18 1099 800 10;
#X msg 654 552 stop;
#X obj 35 28 inlet;
#X text 968 517 stop;
#X obj 612 244 d-gate2;
#X text 667 243 timetag found?;
#X text 577 259 no;
#X text 645 261 yes;
#X obj 770 259 >;
#X text 797 258 cur>x?;
#X obj 612 183 t a a;
#X text 627 294 cur>x?;
#X text 781 292 cur>x?;
#X text 450 373 no - 2;
#X text 602 322 yes - 1;
#X text 704 316 no - 4;
#X text 848 321 yes - 3;
#X text 624 132 current array pos;
#X obj 574 294 d-gate2;
#X obj 724 294 d-gate2;
#X obj 428 578 f;
#X obj 446 551 f;
#X obj 872 340 - 1;
#X obj 836 364 f;
#X msg 836 340 bang;
#X text 431 592 swap store and cur;
#X obj 555 543 f;
#X obj 537 577 f;
#X obj 763 181 sel 0;
#X msg 686 220 1;
#X msg 658 220 0;
#X text 597 336 (do nothing);
#X obj 446 323 t b b;
#X msg 516 395 0;
#X obj 884 518 f;
#X obj 836 447 moses;
#X msg 884 498 bang;
#X obj 719 584 f;
#X obj 750 583 f;
#X msg 719 492 bang;
#X obj 35 488 outlet;
#X obj 35 432 16;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 719 616 pd tw;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 868 541 pd tw;
#N canvas 0 22 450 300 tw 0;
#X obj 25 18 inlet;
#X obj 82 20 inlet;
#X obj 269 20 inlet;
#X obj 100 107 tabwrite \$0-timetags;
#X obj 26 72 tabwrite \$0-values;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 2 0 4 1;
#X restore 428 628 pd tw;
#N canvas 0 22 450 300 tr 0;
#X obj 29 176 outlet;
#X obj 95 176 outlet;
#X obj 29 11 inlet;
#X obj 29 39 t a a;
#X obj 29 79 tabread \$0-values;
#X obj 95 112 tabread \$0-timetags;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X restore 541 483 pd tr;
#N canvas 0 22 450 300 tr 0;
#X obj 29 176 outlet;
#X obj 95 176 outlet;
#X obj 29 11 inlet;
#X obj 29 39 t a a;
#X obj 29 79 tabread \$0-values;
#X obj 96 112 tabread \$0-timetags;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X restore 836 391 pd tr;
#X obj 612 154 tabread \$0-values;
#X obj 763 148 tabread \$0-timetags;
#X obj 35 461 tabread \$0-values;
#X obj 446 83 sel 0;
#X obj 35 283 t b b;
#X obj 53 409 / 2;
#X msg 51 73 size \$1;
#X text 963 446 else;
#X text 65 432 return median;
#X text 789 162 timetag found?;
#X text 482 505 .. other part of 'store';
#X text 487 427 part of 'store'..;
#X text 501 81 if we reach the start - bail out;
#X text 409 348 force write at pos 0;
#X text 747 446 is cur-1>x ?;
#X text 872 463 yes;
#X text 829 464 no;
#X obj 51 52 d-default \$1 32;
#N canvas 0 0 732 342 tables 0;
#X obj 111 60 table \$0-values 32;
#X obj 249 60 table \$0-timetags 32;
#X text 87 34 implements a running median in two arrays:;
#X text 82 114 on insert \, we find the value with the current timetag
;
#X text 82 124 and remove it \, and insert the new value with the current
;
#X text 82 136 timetag \, maintaining order in the values table.;
#X text 82 168 the array \, stepping backwards.;
#X text 82 158 this implemention does both steps in a single pass through
;
#X text 82 88 one array stores values \, the other stores timetags.
;
#X restore 215 481 pd tables;
#X obj 768 561 r \$0-tt;
#X obj 567 577 r \$0-tt;
#X obj 807 182 r \$0-tt;
#X obj 654 576 s \$0-for;
#X msg 756 363 stop;
#X obj 756 387 s \$0-for;
#X obj 657 109 s \$0-curr-pos;
#X obj 763 124 r \$0-curr-pos;
#X obj 872 296 r \$0-curr-pos;
#X obj 913 542 r \$0-curr-pos;
#X obj 762 617 r \$0-curr-pos;
#X obj 541 456 r \$0-curr-pos;
#X obj 475 628 r \$0-curr-pos;
#X obj 612 110 t a a;
#X obj 216 119 s \$0-size;
#X obj 53 385 r \$0-size;
#X obj 126 167 s \$0-clear;
#N canvas 0 0 289 295 clear-and-resize 0;
#X obj 39 214 s \$0-values;
#X msg 98 133 resize \$1;
#X obj 55 106 t b a;
#X obj 98 192 s \$0-timetags;
#X msg 39 132 const 0;
#X text 48 55 clear on resize;
#X obj 55 75 r \$0-size;
#X obj 39 33 r \$0-clear;
#X connect 1 0 0 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 4 0 0 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X restore 215 505 pd clear-and-resize;
#X obj 81 224 s \$0-increment-tag;
#X obj 35 190 t b a b;
#X obj 58 251 s \$0-new-x;
#X obj 658 185 r \$0-new-x;
#X obj 171 146 s \$0-get;
#X obj 50 356 r \$0-get;
#N canvas 0 0 398 295 increment-tag 0;
#X obj 52 151 f;
#X text 78 152 timetag;
#X obj 52 129 f 0;
#X obj 83 129 + 1;
#X obj 113 129 % 32;
#X obj 52 181 s \$0-tt;
#X obj 52 63 r \$0-increment-tag;
#X obj 52 85 b;
#X obj 138 102 r \$0-size;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 8 0 4 1;
#X restore 215 528 pd increment-tag;
#X obj 35 96 route insert float clear get size;
#X obj 788 237 r \$0-new-x;
#X obj 458 577 r \$0-new-x;
#X obj 737 535 r \$0-new-x;
#X obj 868 425 r \$0-new-x;
#X obj 67 309 s \$0-for;
#X text 133 309 start loop;
#N canvas 0 0 374 363 loopdown 0;
#X obj 82 161 d--;
#X obj 82 240 + 31;
#X obj 82 138 d-for 0 32;
#X obj 107 208 - 1;
#X msg 155 94 end \$1;
#X text 118 243 step backwards;
#X obj 82 68 r \$0-for;
#X obj 155 68 r \$0-size;
#X obj 107 185 r \$0-size;
#X obj 82 269 outlet;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 2 0 0 0;
#X connect 3 0 1 1;
#X connect 4 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 3 0;
#X restore 446 37 pd loopdown;
#X obj 446 399 t b b b;
#X obj 724 338 t b b;
#N canvas 0 0 533 574 doc 0;
#X text 158 138 do nothing;
#X text 173 233 move cur-1 to cur;
#X text 144 314 stop;
#X text 154 173 swap store and cur;
#X text 145 220 if cur-1>x;
#X text 123 101 (init) put x \, tt -> store;
#X text 140 246 else;
#X text 170 255 put x \, tt at cur;
#X text 170 267 stop;
#X text 144 301 put store at cur (same as 2.);
#X text 48 76 (x is value \, tt is timetag);
#X text 262 385 part of dlib;
#X text 51 451 released under the GNU General Public License v3+;
#X text 169 412 copyright damian stewart 2008;
#X text 140 426 damian@frey.co.nz | www.frey.co.nz;
#X text 45 64 when inserting x \, tt there are 4 possibilities:;
#X text 121 126 1 timetag not yet found \, cur>x;
#X text 121 159 2 timetag not yet found \, cur<x;
#X text 120 205 3 timetag found \, cur>x;
#X text 120 289 4 timetag found \, cur<x;
#X restore 271 364 pd doc;
#X text 244 585 part of dlib;
#X text 33 651 released under the GNU General Public License v3+;
#X text 151 612 copyright damian stewart 2008;
#X text 122 626 damian@frey.co.nz | www.frey.co.nz;
#X connect 0 0 68 0;
#X connect 1 0 90 0;
#X connect 3 0 17 0;
#X connect 3 1 18 0;
#X connect 7 0 17 1;
#X connect 7 0 18 1;
#X connect 9 0 3 0;
#X connect 9 1 7 0;
#X connect 17 0 98 0;
#X connect 18 0 99 0;
#X connect 18 1 23 0;
#X connect 19 0 43 0;
#X connect 20 0 19 1;
#X connect 21 0 22 1;
#X connect 22 0 45 0;
#X connect 23 0 22 0;
#X connect 25 0 26 1;
#X connect 26 0 43 1;
#X connect 27 0 28 0;
#X connect 28 0 3 1;
#X connect 29 0 3 1;
#X connect 31 0 98 0;
#X connect 31 1 32 0;
#X connect 32 0 43 2;
#X connect 33 0 42 1;
#X connect 34 0 38 0;
#X connect 34 1 35 0;
#X connect 34 1 42 0;
#X connect 35 0 33 0;
#X connect 36 0 41 0;
#X connect 37 0 41 1;
#X connect 38 0 36 0;
#X connect 38 0 37 0;
#X connect 38 0 0 0;
#X connect 40 0 48 0;
#X connect 44 0 20 1;
#X connect 44 1 25 1;
#X connect 45 0 34 0;
#X connect 45 1 33 1;
#X connect 46 0 9 0;
#X connect 47 0 27 0;
#X connect 48 0 39 0;
#X connect 49 0 31 0;
#X connect 49 1 78 0;
#X connect 50 0 40 0;
#X connect 50 1 95 0;
#X connect 51 0 40 1;
#X connect 52 0 90 0;
#X connect 63 0 52 0;
#X connect 65 0 37 1;
#X connect 66 0 26 1;
#X connect 67 0 27 1;
#X connect 69 0 70 0;
#X connect 72 0 47 0;
#X connect 73 0 21 0;
#X connect 74 0 42 2;
#X connect 75 0 41 2;
#X connect 76 0 44 0;
#X connect 77 0 43 2;
#X connect 78 0 46 0;
#X connect 78 1 71 0;
#X connect 80 0 51 0;
#X connect 84 0 50 0;
#X connect 84 1 85 0;
#X connect 84 2 83 0;
#X connect 86 0 29 0;
#X connect 88 0 40 0;
#X connect 90 0 84 0;
#X connect 90 1 84 0;
#X connect 90 2 81 0;
#X connect 90 3 87 0;
#X connect 90 4 79 0;
#X connect 91 0 7 1;
#X connect 92 0 19 1;
#X connect 93 0 36 1;
#X connect 94 0 34 1;
#X connect 97 0 49 0;
#X connect 98 0 20 0;
#X connect 98 0 25 0;
#X connect 98 1 19 0;
#X connect 98 2 26 0;
#X connect 99 0 98 0;
#X connect 99 1 69 0;
