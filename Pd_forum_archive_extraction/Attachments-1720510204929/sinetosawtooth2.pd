#N canvas 95 168 926 532 10;
#X obj 29 203 rpole~;
#X obj 27 55 *~ 1e+07;
#X obj 141 407 dac~;
#X obj 27 31 osc~ 220;
#X floatatom 27 9 5 0 0 0 - - -;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-array 1000 float 0;
#X coords 0 2 999 -1 320 450 1 0 0;
#X restore 568 18 graph;
#X obj 31 455 tabwrite~ \$0-array;
#X obj 30 258 samphold~;
#X obj 74 152 *~ -1;
#X obj 74 176 +~ 1;
#X obj 28 177 sig~ 1;
#X obj 39 429 metro 100;
#X obj 39 404 loadbang;
#X text 148 10 sine to sawtooth with frequency extraction all signal
level;
#X obj 27 102 biquad~ 0 0 1 -1 0;
#X obj 162 333 phasor~;
#X obj 373 236 mtof;
#X obj 373 262 / 220;
#X obj 373 211 + 57;
#X floatatom 373 183 5 0 0 0 - - -;
#X floatatom 373 287 5 0 0 0 - - -;
#X text 319 156 adjust for second voice (halftones);
#X text 168 449 phasor entirely controlled by incoming signal but freely
transposable;
#X msg 325 399 \; pd dsp 1;
#X msg 392 399 \; pd dsp 0;
#X obj 608 435 s \$0-array;
#X msg 608 408 arrayviewlistnew;
#X obj 27 78 clip~ 0 1;
#X text 85 53 scale up;
#X floatatom 419 253 5 0 0 0 - - -;
#X obj 27 127 expr~ $v1==1;
#X obj 30 287 expr~ 44100/$v1;
#X text 556 11 2;
#X text 551 456 -1;
#X text 93 75 convert sine to rectangle (0 - 1);
#X text 454 227 midinote;
#X floatatom 419 228 5 0 0 0 - - -;
#X text 453 253 frequency (Hz);
#X text 106 126 upward slope;
#X obj 44 315 unsig~;
#X floatatom 44 340 5 0 0 0 - - -;
#X text 149 99 differentiator: convert rectangles to pulses (-1 and
1);
#X obj 29 230 zexy/z~ 2;
#X text 74 201 integrator (sample counter);
#X obj 30 367 phasor~;
#X text 94 228 2 samples delay;
#X text 78 339 Hz;
#X obj 187 356 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 1100 1;
#X floatatom 197 383 5 0 0 0 - - -;
#X obj 128 383 *~ 0;
#X obj 163 383 *~ 0;
#X text 92 258 hold nr of samples per cycle;
#X text 128 281 compute frequency (SR 44K1 assumed);
#X obj 162 303 *~ 1;
#X text 411 287 frequency ratio;
#X connect 0 0 42 0;
#X connect 1 0 27 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 7 0 31 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 0 0;
#X connect 11 0 6 0;
#X connect 12 0 11 0;
#X connect 14 0 30 0;
#X connect 15 0 50 0;
#X connect 16 0 17 0;
#X connect 16 0 29 0;
#X connect 17 0 20 0;
#X connect 18 0 16 0;
#X connect 18 0 36 0;
#X connect 19 0 18 0;
#X connect 20 0 53 1;
#X connect 26 0 25 0;
#X connect 27 0 14 0;
#X connect 30 0 8 0;
#X connect 30 0 7 1;
#X connect 31 0 39 0;
#X connect 31 0 44 0;
#X connect 31 0 53 0;
#X connect 39 0 40 0;
#X connect 42 0 7 0;
#X connect 44 0 6 0;
#X connect 44 0 49 0;
#X connect 47 0 48 0;
#X connect 47 0 49 1;
#X connect 47 0 50 1;
#X connect 49 0 2 0;
#X connect 50 0 2 1;
#X connect 53 0 15 0;
