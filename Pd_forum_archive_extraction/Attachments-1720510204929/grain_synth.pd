#N canvas 0 43 1364 723 10;
#X obj 11 235 noteout;
#X msg 62 187 127;
#X obj 90 349 adc~;
#X msg 11 347 start;
#X msg 11 482 stop;
#X obj 89 392 writesf~ 2;
#X obj 11 257 select 127;
#X obj 11 392 env~ 14700;
#X obj 669 456 soundfiler;
#N canvas 0 50 450 250 (subpatch) 0;
#X array left 314368 float 2;
#X coords 0 1 314368 -1 200 140 1;
#X restore 811 151 graph;
#X floatatom 669 477 10 0 0 0 - - -, f 10;
#X obj 11 417 spigot;
#X obj 18 462 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 11 440 sel 0;
#X obj 11 277 t b b;
#X obj 11 133 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 11 164 t b b b;
#X obj 11 211 makenote 127 20;
#X obj 11 526 s graficar;
#X obj 669 407 r graficar;
#X obj 11 504 del 500;
#X msg 746 456 bang;
#X msg 113 187 20;
#X obj 437 682 *~;
#X obj 141 714 samphold~;
#X obj 11 732 +~;
#X obj 1326 357 samplerate~;
#X floatatom 1326 378 10 0 0 0 - - -, f 10;
#X obj 1306 337 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1326 413 osc~;
#X msg 1410 352 0;
#X obj 1327 433 *~ -0.5;
#X obj 1327 453 +~ 0.5;
#X obj 1326 473 tabwrite~ hanning;
#N canvas 0 50 450 250 (subpatch) 0;
#X array hanning 128 float 1;
#A 0 0 0.000602275 0.00240764 0.00541174 0.00960734 0.0149843 0.0215298
0.0292279 0.0380601 0.0480052 0.0590392 0.0711355 0.0842649 0.0983959
0.113494 0.129524 0.146446 0.16422 0.182803 0.20215 0.222214 0.242948
0.264301 0.286222 0.308658 0.331555 0.354857 0.37851 0.402455 0.426635
0.450991 0.475466 0.5 0.524534 0.549009 0.573365 0.597545 0.62149 0.645143
0.668445 0.691342 0.713778 0.735699 0.757052 0.777786 0.79785 0.817197
0.83578 0.853554 0.870476 0.886506 0.901605 0.915736 0.928865 0.940961
0.951995 0.96194 0.970773 0.978471 0.985016 0.990393 0.994589 0.997593
0.999398 1 0.999398 0.997592 0.994588 0.990392 0.985015 0.978469 0.970771
0.961939 0.951993 0.940959 0.928863 0.915733 0.901602 0.886503 0.870473
0.853551 0.835777 0.817194 0.797847 0.777782 0.757048 0.735695 0.713774
0.691338 0.668441 0.645139 0.621486 0.597541 0.573361 0.549004 0.52453
0.499996 0.475462 0.450987 0.42663 0.40245 0.378505 0.354853 0.331551
0.308654 0.286218 0.264297 0.242944 0.222211 0.202146 0.182799 0.164217
0.146443 0.129521 0.113491 0.0983929 0.084262 0.0711327 0.0590366 0.0480028
0.038058 0.0292259 0.0215281 0.0149829 0.00960615 0.00541082 0.00240701
0.000601947;
#X coords 0 1 127 0 200 140 1 0 0;
#X restore 1260 152 graph;
#X obj 1071 926 *~;
#X obj 12 798 *~;
#X obj 31 755 tabread4~ hanning;
#X obj 12 945 wrap~;
#X obj 12 925 +~ 0.5;
#X obj 52 977 samphold~;
#X obj 13 994 +~;
#X obj 14 1059 *~;
#X obj 33 1015 tabread4~ hanning;
#N canvas 0 50 450 250 (subpatch) 0;
#X array right 314368 float 2;
#X coords 0 1 314368 -1 200 140 1;
#X restore 1033 152 graph;
#X obj 162 771 *~;
#X obj 162 1033 *~;
#X obj 1219 926 *~;
#X obj 746 477 samplerate~;
#X obj 1447 112 s windowsize;
#X msg -10 67 \; pd dsp \$1;
#X obj -10 14 tgl 40 0 empty empty empty 17 7 0 10 -260097 -1 -1 0
1;
#X obj 1512 49 loadbang;
#X msg 1441 337 \; hanning resize \$1;
#X obj 1326 394 /;
#X obj 1345 298 r windowsize;
#X obj 111 956 r windowsize;
#X obj 12 708 *~;
#X obj 13 973 *~;
#X obj 1345 320 t b f f;
#X msg 1512 72 128;
#X msg 1543 72 64;
#X msg 1574 72 256;
#X msg 11 187 60;
#X msg 1606 72 512;
#X msg 1638 72 1024;
#X msg 1480 72 32;
#X msg 1448 72 16;
#X obj 1467 866 vsl 15 128 0.01 1 1 0 empty empty volume 0 -9 0 10
-262144 -1 -1 0 1;
#X obj 43 298 list;
#X obj 188 62 s sample_name;
#X obj 68 278 r sample_name;
#X msg 43 318 open -wave -bytes 4 -rate 48000 \$1;
#X obj 756 407 list;
#X obj 756 387 r sample_name;
#X msg 669 431 read -resize \$1 left right;
#X obj 162 750 tabread4~ right;
#X obj 12 776 tabread4~ left;
#X obj 14 1037 tabread4~ left;
#X obj 161 1011 tabread4~ right;
#X obj 1072 1021 outlet~;
#X obj 1219 1021 outlet~;
#X obj 1527 812 r vol;
#X obj 1527 831 clip 0 2;
#X floatatom 1527 850 5 0 0 0 - - -, f 5;
#X obj 686 22 inlet;
#X obj 686 42 s vol;
#X floatatom 437 645 5 0 0 0 - - -, f 5;
#X obj 437 623 expr 1000 / $f1;
#X obj 813 709 phasor~ 261.626;
#X obj 813 672 r pitch;
#X obj 745 22 inlet;
#X obj 745 42 s pitch;
#X floatatom 813 692 10 0 0 0 - - -, f 10;
#X obj 437 662 phasor~;
#X obj 1071 997 *~;
#X obj 1219 997 *~;
#X obj 813 729 s~ pitch_phase;
#X obj 12 671 r~ pitch_phase;
#X obj 12 902 r~ pitch_phase;
#X obj 233 698 r~ pitch_phase;
#X obj 437 702 s~ indicator;
#X obj 208 959 r~ indicator;
#X obj 141 693 r~ indicator;
#X obj 41 691 r windowsize;
#X obj 815 22 inlet;
#X obj 815 42 s trig;
#X obj 12 818 throw~ left_ch;
#X obj 162 791 throw~ right_ch;
#X obj 14 1079 throw~ left_ch;
#X obj 162 1053 throw~ right_ch;
#X obj 1071 805 catch~ left_ch;
#X obj 1219 806 catch~ right_ch;
#X obj 1172 1030 dac~;
#X obj 746 497 s srate;
#X obj 1117 553 r srate;
#X floatatom 1117 597 10 0 0 0 - - -, f 10;
#X obj 1117 574 expr $f2 * 1000 / $f1;
#X obj 875 22 inlet;
#X obj 1261 553 r length_s;
#X obj 1117 616 s length_ms;
#X obj 437 601 r length_ms;
#X obj 494 665 r length_s;
#X obj 669 496 s length_s;
#X obj 883 625 r rst_phase;
#X obj 432 370 r length_ms;
#X obj 875 42 s length_ms;
#X obj 1345 909 r gate;
#X obj 352 387 delay;
#X obj 352 249 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 352 407 \; gate 0;
#X msg 375 354 \; gate 1;
#X msg 833 473 \; left normalize 0.5;
#X msg 973 473 \; right normalize 0.5;
#X obj 883 645 t f f;
#X msg 398 295 \; gate 0 \; rst_phase 0;
#X obj 352 275 t b b b;
#X text 1298 1022 dac~ is used here to test the patch;
#X text 987 26 Inlets are placed here to use this patch as an abstraction
once it's complete;
#X msg 188 36 /path/to/sample.wav;
#X text 173 13 First \, load a wave file;
#X text 53 126 This is used to take a sample from a softsynth;
#X text 1397 396 Make a hanning window with the apropiate size;
#X text 659 365 Graph the sample \, load it to arrays and output the
lenght;
#X text 1215 593 Calculate the sample length in miliseconds;
#X text 7 632 The table lookup \, borrowed from pd-tutorial's granular
synthesis;
#X text 13 882 Table lookup phase shifted to fill gaps;
#X text 1248 877 Let sound through when fired;
#X text 414 213 Test the output. If you bang it quickly on percussive
sounds a click can be heard.;
#X text 434 567 Set the indicator's freq to let the period amount to
the length in ms.;
#X connect 1 0 17 1;
#X connect 2 0 5 0;
#X connect 2 0 7 0;
#X connect 2 1 5 1;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 6 0 14 0;
#X connect 7 0 11 0;
#X connect 7 0 11 1;
#X connect 8 0 10 0;
#X connect 10 0 123 0;
#X connect 11 0 13 0;
#X connect 12 0 4 0;
#X connect 13 0 12 0;
#X connect 13 0 20 0;
#X connect 14 0 3 0;
#X connect 14 1 69 0;
#X connect 15 0 16 0;
#X connect 16 0 63 0;
#X connect 16 1 1 0;
#X connect 16 2 22 0;
#X connect 17 0 0 0;
#X connect 17 1 0 1;
#X connect 17 1 6 0;
#X connect 19 0 75 0;
#X connect 20 0 18 0;
#X connect 21 0 132 0;
#X connect 21 0 133 0;
#X connect 21 0 48 0;
#X connect 22 0 17 2;
#X connect 23 0 101 0;
#X connect 24 0 25 1;
#X connect 25 0 76 0;
#X connect 25 0 77 0;
#X connect 26 0 27 0;
#X connect 27 0 54 0;
#X connect 28 0 26 0;
#X connect 28 0 30 0;
#X connect 28 0 33 0;
#X connect 29 0 31 0;
#X connect 30 0 29 1;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 35 0 95 0;
#X connect 36 0 107 0;
#X connect 37 0 36 1;
#X connect 37 0 45 1;
#X connect 38 0 40 1;
#X connect 38 0 58 0;
#X connect 39 0 38 0;
#X connect 40 0 41 1;
#X connect 41 0 78 0;
#X connect 41 0 79 0;
#X connect 42 0 109 0;
#X connect 43 0 42 1;
#X connect 43 0 46 1;
#X connect 45 0 108 0;
#X connect 46 0 110 0;
#X connect 47 0 96 0;
#X connect 48 0 114 0;
#X connect 51 0 50 0;
#X connect 52 0 60 0;
#X connect 54 0 29 0;
#X connect 55 0 59 0;
#X connect 56 0 58 1;
#X connect 57 0 25 0;
#X connect 57 0 37 0;
#X connect 58 0 41 0;
#X connect 58 0 43 0;
#X connect 59 0 28 0;
#X connect 59 1 54 1;
#X connect 59 2 53 0;
#X connect 60 0 49 0;
#X connect 61 0 49 0;
#X connect 62 0 49 0;
#X connect 63 0 17 0;
#X connect 64 0 49 0;
#X connect 65 0 49 0;
#X connect 66 0 49 0;
#X connect 67 0 49 0;
#X connect 68 0 96 1;
#X connect 68 0 95 1;
#X connect 69 0 72 0;
#X connect 71 0 69 1;
#X connect 72 0 5 0;
#X connect 73 0 75 0;
#X connect 74 0 73 0;
#X connect 75 0 8 0;
#X connect 75 0 21 0;
#X connect 76 0 45 0;
#X connect 77 0 36 0;
#X connect 78 0 42 0;
#X connect 79 0 46 0;
#X connect 82 0 83 0;
#X connect 83 0 84 0;
#X connect 84 0 68 0;
#X connect 85 0 86 0;
#X connect 87 0 94 0;
#X connect 88 0 87 0;
#X connect 89 0 97 0;
#X connect 90 0 93 0;
#X connect 91 0 92 0;
#X connect 93 0 89 0;
#X connect 94 0 23 0;
#X connect 95 0 80 0;
#X connect 95 0 113 0;
#X connect 96 0 81 0;
#X connect 96 0 113 1;
#X connect 98 0 57 0;
#X connect 99 0 39 0;
#X connect 100 0 24 1;
#X connect 102 0 40 0;
#X connect 103 0 24 0;
#X connect 104 0 57 1;
#X connect 105 0 106 0;
#X connect 111 0 35 0;
#X connect 112 0 47 0;
#X connect 115 0 117 0;
#X connect 116 0 120 0;
#X connect 117 0 116 0;
#X connect 118 0 126 0;
#X connect 119 0 117 1;
#X connect 121 0 88 0;
#X connect 122 0 23 1;
#X connect 124 0 134 0;
#X connect 125 0 128 1;
#X connect 127 0 35 1;
#X connect 127 0 47 1;
#X connect 128 0 130 0;
#X connect 129 0 136 0;
#X connect 134 0 94 1;
#X connect 134 1 89 1;
#X connect 136 0 128 0;
#X connect 136 1 131 0;
#X connect 136 2 135 0;
#X connect 139 0 70 0;
